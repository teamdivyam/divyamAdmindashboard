import{r as w}from"./p-defer-BUV9kL4s.js";var s={exports:{}},d=s.exports,h;function g(){return h||(h=1,function(_,v){var x=d&&d.__awaiter||function(t,l,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{u(n.next(e))}catch(f){o(f)}}function p(e){try{u(n.throw(e))}catch(f){o(f)}}function u(e){e.done?i(e.value):new r(function(f){f(e.value)}).then(a,p)}u((n=n.apply(t,l||[])).next())})},y=d&&d.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(v,"__esModule",{value:!0});const D=y(w());function c(t,l="maxAge"){let r,n,i;const o=()=>x(this,void 0,void 0,function*(){if(r!==void 0)return;const u=e=>x(this,void 0,void 0,function*(){i=D.default();const f=e[1][l]-Date.now();if(f<=0){t.delete(e[0]),i.resolve();return}return r=e[0],n=setTimeout(()=>{t.delete(e[0]),i&&i.resolve()},f),typeof n.unref=="function"&&n.unref(),i.promise});try{for(const e of t)yield u(e)}catch{}r=void 0}),a=()=>{r=void 0,n!==void 0&&(clearTimeout(n),n=void 0),i!==void 0&&(i.reject(void 0),i=void 0)},p=t.set.bind(t);return t.set=(u,e)=>{t.has(u)&&t.delete(u);const f=p(u,e);return r&&r===u&&a(),o(),f},o(),t}v.default=c,_.exports=c,_.exports.default=c}(s,s.exports)),s.exports}export{g as r};
