import{a as t,r as o}from"./react-BM40__SY.js";import{_ as c}from"./index-fHwZLE-T.js";import{a as P,u as _}from"./react-router-DRLUvzUh.js";import{u as C}from"./react-hook-form-BN_naEWj.js";import{o as R}from"./@hookform-D0jWCfUg.js";import{c as T,a as j}from"./yup-DazPcaNu.js";import{d as $}from"./lodash.debounce-CZf779uP.js";import{T as D}from"./sonner-UVoS8Wfh.js";import{w as K}from"./sonner-CBLC4ypc.js";import{k as L,x as z,y as G}from"./lucide-react-BWZ2dPnB.js";import"./attr-accept-CkmCM30I.js";import"./react-dom-BKOhnANa.js";import"./scheduler-C323NY8X.js";import"./@radix-ui-Bvz2HI7m.js";import"./react-remove-scroll-DR3rXkvR.js";import"./tslib-eMSY344_.js";import"./react-remove-scroll-bar-BhARyL5A.js";import"./react-style-singleton-DeLYGn6u.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-CISbmOY4.js";import"./use-callback-ref-Bp38XRF0.js";import"./aria-hidden-DQ5UC2Eg.js";import"./@floating-ui-DHl6l98I.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./react-google-recaptcha-C2_uU7Xm.js";import"./prop-types-DFk7-3jw.js";import"./react-async-script-BL5K2liq.js";import"./hoist-non-react-statics-CPzswhKp.js";import"./react-is-CnyDuYXe.js";import"./react-redux-DNfLtVbP.js";import"./use-sync-external-store-H6R0MgJP.js";import"./@reduxjs-DtXgGc0i.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./jwt-decode-VWaDGczM.js";import"./recharts-BSzae8HI.js";import"./lodash-DiYzGN5e.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./react-smooth-DYD8lKML.js";import"./fast-equals-BIyco3rD.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-CEDTliZZ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-BRe_pui0.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-tjHGMS6M.js";import"./cookie--_YQFYBD.js";import"./next-themes-05dgSDaz.js";const E=({User:e,isSearchResults:l})=>{let s=e==null?void 0:e.avatar;return s||(s="https://placehold.co/150x150?text=NA"),t.createElement("li",{id:"userLists",className:l?"bg-green-50 dark:bg-slate-500 border-neutral-400  p-4 flex w-full flex-row justify-between items-center rounded-2xl":"dark:bg-slate-500 border-neutral-400 bg-neutral-200 p-4 flex w-full flex-row justify-between items-center rounded-2xl"},t.createElement("div",{className:"flex flex-row"},t.createElement("img",{src:s,onError:"this.onerror=null; this.src='https://placehold.co/150x150?text=NA'",className:"size-16 rounded-full"}),t.createElement("div",{className:"profileListTextContent pl-8 content-center	"},t.createElement("h3",{className:"font-bold"},e!=null&&e.fullName?e.fullName:"Not Available."),t.createElement("h4",{className:"text-neutral-600 font-light dark:text-white capitalize"},e!=null&&e.mobileNum?e.mobileNum:"Not Available."))),t.createElement("div",{className:"viewMore"},t.createElement(P,{to:`${c&&c.APP_URL}/dashboard/user/${e._id}`,className:"text-neutral-500"},"View More")))},V=T({searchKey:j().trim().max(50).required("Searchbox can't be blank")}),B={page:1,limit:9,isPrevPageAvailable:!1,isNextPageAvailable:!1},I=(e,l)=>{switch(l.type){case"NEXT_PAGE":return e.page>=1&&(e.isPrevPageAvailable=!0),{...e,page:e.page+1};case"PREV_PAGE":return e.page<=1?e:{...e,page:e.page-1}}},Ue=()=>{_();const[e,l]=o.useState(null),[s,u]=o.useState(!0),[m,f]=o.useState([]),b=localStorage.getItem("AppID"),[i,d]=o.useReducer(I,B),[x,h]=o.useState(),{register:N,handleSubmit:p,reset:F,setValue:H,formState:{error:M},watch:w}=C({mode:"all",resolver:R(V)}),y=localStorage.getItem("AppID"),g=r=>{(async()=>{try{const n=await fetch(`${c&&c.BACKEND_URL}/api/admin/search-user?s=${r==null?void 0:r.searchKey}`,{cache:"no-cache",method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`}});n.ok||K.error("No Records founds");const k=await n.json();f(k)}catch(n){console.log(n)}})()},v=o.useCallback($(p(g),1e3),[]),A=()=>{d({type:"NEXT_PAGE"})},S=()=>{d({type:"PREV_PAGE"})};return o.useEffect(()=>{const{searchKey:r}=w();(r==null?void 0:r.length)<=3&&f(null)},[x,h]),o.useEffect(()=>{(async()=>{try{const a=await fetch(`${c.BACKEND_URL}/api/admin/users?page=${i.page}&limit=${i.limit}`,{method:"GET",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok){l([]);return}const n=await a.json();u(!1),l(n)}catch(a){console.error("Error fetching data:",a),u(!0)}})()},[i]),e&&!e.length?t.createElement("span",{className:"block lg:mt-20 text-center font-medium text-neutral-500"},"You've reached the end of the list. Go back or consider ways to inspire more users to sign up"):t.createElement(t.Fragment,null,s?null:t.createElement(t.Fragment,null,t.createElement("div",{id:"userProfile_wrapper ",className:`bg-neutral-50 border p-12  w-1/2 rounded-md mx-auto relative
             dark:bg-slate-700`},t.createElement(D,{richColors:!0}),t.createElement("form",{onSubmit:p(g),onChange:v,className:" w-full  flex justify-between items-center  gap-2 p-2"},t.createElement("input",{type:"search",name:"userSearch",id:"userSearch",className:"bg-white rounded-full border w-full py-3 px-6  focus:outline-none focus:border-orange-200 focus:ring-1 focus:ring-sky-50 dark:bg-slate-600 dark:border dark:border-orange-100 dark:placeholder:text-gray-200",placeholder:"Search users..",onKeyDown:r=>{p(),h(r.target.value)},...N("searchKey")}),t.createElement("button",{className:"text-neutral-400 dark:text-orange-200 "},t.createElement(L,{className:"size-8"}))),t.createElement("ul",{className:"flex lg:flex-col gap-3 lg:mt-4"},m&&m.length>0?m.map((r,a)=>t.createElement(E,{key:r._id,User:r,isSearchResults:!0})):t.createElement("ul",{className:"flex lg:flex-col gap-3 lg:mt-4"},e&&e.length?e.map((r,a)=>t.createElement(E,{key:r._id,User:r,isSearchResults:!1})):null)),e.length&&e.length?t.createElement("div",{className:"flex gap-2 justify-end"},i&&i.isPrevPageAvailable&&t.createElement("button",{onClick:S,role:"button",title:"next",className:"bg-orange-300 transition-colors ease-in hover:bg-orange-400 text-white size-10 flex justify-center items-center mt-10 rounded-full"},t.createElement(z,null)),t.createElement("button",{onClick:A,role:"button",title:"next",className:"bg-orange-300 transition-colors ease-in hover:bg-orange-400 text-white size-10 flex justify-center items-center mt-10 rounded-full"},t.createElement(G,null))):null)))};export{Ue as default};
