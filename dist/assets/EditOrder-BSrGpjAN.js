import{r as n,a as e}from"./react-BM40__SY.js";import{B as O}from"./badge-DAiYVQtE.js";import{_ as c,B as P}from"./index-fHwZLE-T.js";import{T as $}from"./sonner-UVoS8Wfh.js";import{w as m}from"./sonner-CBLC4ypc.js";import{S as A,a as I,b as T,c as R,d as a}from"./select-Cd5bAGBT.js";import{u as _}from"./react-hook-form-BN_naEWj.js";import{o as B}from"./@hookform-D0jWCfUg.js";import{c as U,a as V}from"./yup-DazPcaNu.js";import{O as j}from"./OrderedProduct-DU2Y6jiO.js";import{L}from"./Loader-CZaHulb3.js";import{u as z,p as F,m as H,I as M}from"./lucide-react-BWZ2dPnB.js";import{d as G}from"./react-router-DRLUvzUh.js";import"./attr-accept-CkmCM30I.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./react-dom-BKOhnANa.js";import"./scheduler-C323NY8X.js";import"./@radix-ui-Bvz2HI7m.js";import"./react-remove-scroll-DR3rXkvR.js";import"./tslib-eMSY344_.js";import"./react-remove-scroll-bar-BhARyL5A.js";import"./react-style-singleton-DeLYGn6u.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-CISbmOY4.js";import"./use-callback-ref-Bp38XRF0.js";import"./aria-hidden-DQ5UC2Eg.js";import"./@floating-ui-DHl6l98I.js";import"./tailwind-merge-D696Ktp4.js";import"./react-google-recaptcha-C2_uU7Xm.js";import"./prop-types-DFk7-3jw.js";import"./react-async-script-BL5K2liq.js";import"./hoist-non-react-statics-CPzswhKp.js";import"./react-is-CnyDuYXe.js";import"./react-redux-DNfLtVbP.js";import"./use-sync-external-store-H6R0MgJP.js";import"./@reduxjs-DtXgGc0i.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./jwt-decode-VWaDGczM.js";import"./recharts-BSzae8HI.js";import"./lodash-DiYzGN5e.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./react-smooth-DYD8lKML.js";import"./fast-equals-BIyco3rD.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-CEDTliZZ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-BRe_pui0.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-tjHGMS6M.js";import"./cookie--_YQFYBD.js";import"./next-themes-05dgSDaz.js";const q=U({status:V().oneOf(["Packed","Shipped","Out for Delivery","Cancelled","Delivered","Returned","Refunded","Failed","On Hold"],"Invalid status").required("Order Status is required")}),ct=()=>{var d,u,b,g,E,w,y;const[t,f]=n.useState(null),[x,v]=n.useState(!0),{ORDER_ID:i}=G(),{register:K,formState:J,trigger:S,isValid:Q,reset:W,setValue:D,handleSubmit:X,watch:k}=_({resolver:B(q),mode:"all",defaultValues:{status:""}}),p=localStorage.getItem("AppID"),C=async()=>{await S()||m.error("Please fill the form carefully..");const{status:N}=k();(async()=>{var o;try{const s=await(await fetch(`${(o=c)==null?void 0:o.BACKEND_URL}/api/admin/order/${i}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({status:N})})).json();s||m.error("Internal error."),(s==null?void 0:s.statusCode)===200?m.success(s==null?void 0:s.msg):m.error("Internal error.")}catch(h){m.error(h.message)}})()};return n.useEffect(()=>{const l=`${c.BACKEND_URL}/api/admin/order/${i}`;(async()=>{try{const r=await fetch(l,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`}});r.ok||m.error("Internal error ");const o=await r.json();f(o.Order),setTimeout(()=>{v(!1)},500)}catch(r){m.error(r==null?void 0:r.message)}})()},[]),e.createElement(e.Fragment,null,e.createElement($,{richColors:!0}),e.createElement("div",null,x?e.createElement(L,null):e.createElement("div",{className:"bg-neutral-100 rounded-lg border p-6 mx-auto w-1/2 dark:bg-slate-500",id:"oderPreview"},e.createElement("div",{className:"cardHeader flex justify-between"},e.createElement(O,{variant:"destructive",className:"bg-orange-400"},e.createElement(z,null)),e.createElement("div",{className:"w-64"},e.createElement(A,{className:"w-[10px] focus:border-orange-400 ring-orange-600",onValueChange:l=>{D("status",l)}},e.createElement(I,{className:""},e.createElement(T,{placeholder:`Update order status: ${t==null?void 0:t.orderStatus}`})),e.createElement(R,null,e.createElement(a,{value:"Pending"},"Pending"),e.createElement(a,{value:"Packed"},"Packed"),e.createElement(a,{value:"Shipped"},"shipped"),e.createElement(a,{value:"Out for Delivery"},"Out for Delivery"),e.createElement(a,{value:"Delivered"},"Delivered"),e.createElement(a,{value:"Cancelled"},"Cancelled"),e.createElement(a,{value:"Refunded"},"Refunded"),e.createElement(a,{value:"Failed"},"Failed"))))),e.createElement("div",{className:"cardBody bg-white rounded-md border  dark:border-gray-400 p-6 mt-6 dark:bg-slate-400"},e.createElement("div",{className:"products mb-4  product-card "},t&&e.createElement(j,{Product:t.product}))),t&&e.createElement("div",{className:"-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto"},e.createElement("div",{className:"inline-block min-w-full shadow-sm rounded-sm overflow-hidden"},e.createElement("table",{className:"min-w-full leading-normal"},e.createElement("tbody",null,e.createElement("tr",null,e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-900 whitespace-no-wrap"},"Name:")),e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-400 whitespace-no-wrap"},e.createElement("span",{className:"flex items-center gap-2"},((d=t==null?void 0:t.customer)==null?void 0:d.avatar)&&e.createElement("img",{src:`${c.IMAGE_CDN}/Uploads/users/${((u=t==null?void 0:t.customer)==null?void 0:u.avatar)||null}`,className:"size-7 rounded-full shadow-sm",onClick:()=>{setIsphotoViewer(l=>!l)}}),((b=t==null?void 0:t.customer)==null?void 0:b.fullName)||e.createElement("span",null,"Not available"))))),e.createElement("tr",null,e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-900 whitespace-no-wrap"},"Dob:")),e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-900 whitespace-no-wrap"},(t==null?void 0:t.customer.dob)||"Not available"))),e.createElement("tr",null,e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-900 whitespace-no-wrap"},"Gender:")),e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-400 whitespace-no-wrap"},((g=t==null?void 0:t.customer)==null?void 0:g.gender)||"not available"))),e.createElement("tr",null,e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-900 whitespace-no-wrap"},"Payment mode:")),e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-400 whitespace-no-wrap"},e.createElement("div",{className:"flex gap-1"},((E=t==null?void 0:t.transaction)==null?void 0:E.paymentMethod)||"Not available",((w=t==null?void 0:t.transaction)==null?void 0:w.status)=="success"?e.createElement(F,{className:"text-green-500 bg-neutral-100 rounded-full p-1"}):null)))),e.createElement("tr",null,e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-900 whitespace-no-wrap"},"Order status")),e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-400 whitespace-no-wrap"},t&&t.orderStatus))),e.createElement("tr",null,e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-900 whitespace-no-wrap"},"Address:")),e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-400 whitespace-no-wrap"},`${t.booking.address.area}  ${t.booking.address.city} ${t.booking.address.state} 
                   ${t.booking.address.pinCode} Landmark : ${t.booking.address.landMark}`,e.createElement("span",{className:"flex items-center mt-2"},e.createElement("span",{className:"flex justify-center items-center bg-blue-500 size-5  rounded-full w-[300]"},e.createElement(H,{className:"text-white ",size:10})),e.createElement("span",{className:"ml-2"},t.booking.address.contactNumber))))),e.createElement("tr",null,e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-900 whitespace-no-wrap font-semibold"},"Total Amount:")),e.createElement("td",{className:"px-5 py-5 border-b border-gray-200 bg-white text-sm"},e.createElement("p",{className:"text-gray-800 whitespace-no-wrap font-semibold"},e.createElement("span",{className:"flex items-center"},e.createElement(M,{className:"size-4"})," ",t&&((y=t==null?void 0:t.transaction)==null?void 0:y.amount))))))))),e.createElement("div",{className:"flex justify-end"},e.createElement(P,{className:"mt-4 bg-theme-color",onClick:C},"Update Now")))))};export{ct as default};
