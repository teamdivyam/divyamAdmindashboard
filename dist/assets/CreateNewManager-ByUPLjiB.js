import{r as s,a as e}from"./react-BM40__SY.js";import{k as b,L as u,B as F,I as y,T as pe,p as fe,q as ge,v as Ee,_ as q}from"./index-fHwZLE-T.js";import{T as xe}from"./textarea-CVz0WJ5F.js";import{S as G,a as H,c as J,d as w,b as be}from"./select-Cd5bAGBT.js";import{u as Ne}from"./react-hook-form-BN_naEWj.js";import{c as ve,b as he,a as g,f as ye}from"./yup-DazPcaNu.js";import{o as we}from"./@hookform-D0jWCfUg.js";import{c as Se}from"./copy-to-clipboard-8k_B9o4p.js";import{G as Te,H as Y,J as Q,K as Z,M as ee,V as te,N as ae}from"./@radix-ui-Bvz2HI7m.js";import{c as Ce}from"./class-variance-authority-Dp3B9jqt.js";import{X as re,D as Ae,F as W,H as Me,J as Pe}from"./lucide-react-BWZ2dPnB.js";import{B as ke}from"./badge-DAiYVQtE.js";import{C as _e,b as qe,d as De,e as Oe}from"./command-C-zk0mwW.js";import{_ as Fe}from"./cmdk-BqBG_NPy.js";import"./attr-accept-CkmCM30I.js";import"./react-dom-BKOhnANa.js";import"./scheduler-C323NY8X.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./react-google-recaptcha-C2_uU7Xm.js";import"./prop-types-DFk7-3jw.js";import"./react-async-script-BL5K2liq.js";import"./hoist-non-react-statics-CPzswhKp.js";import"./react-is-CnyDuYXe.js";import"./react-redux-DNfLtVbP.js";import"./use-sync-external-store-H6R0MgJP.js";import"./@reduxjs-DtXgGc0i.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./jwt-decode-VWaDGczM.js";import"./react-router-DRLUvzUh.js";import"./cookie--_YQFYBD.js";import"./sonner-CBLC4ypc.js";import"./recharts-BSzae8HI.js";import"./lodash-DiYzGN5e.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./react-smooth-DYD8lKML.js";import"./fast-equals-BIyco3rD.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-CEDTliZZ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-BRe_pui0.js";import"./react-remove-scroll-DR3rXkvR.js";import"./tslib-eMSY344_.js";import"./react-remove-scroll-bar-BhARyL5A.js";import"./react-style-singleton-DeLYGn6u.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-CISbmOY4.js";import"./use-callback-ref-Bp38XRF0.js";import"./aria-hidden-DQ5UC2Eg.js";import"./@floating-ui-DHl6l98I.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-tjHGMS6M.js";import"./toggle-selection-DGa8lynz.js";import"./dialog-CwGvPLDO.js";const Ie=1,Ve=1e6;let D=0;function $e(){return D=(D+1)%Number.MAX_SAFE_INTEGER,D.toString()}const O=new Map,X=a=>{if(O.has(a))return;const r=setTimeout(()=>{O.delete(a),S({type:"REMOVE_TOAST",toastId:a})},Ve);O.set(a,r)},Le=(a,r)=>{switch(r.type){case"ADD_TOAST":return{...a,toasts:[r.toast,...a.toasts].slice(0,Ie)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(l=>l.id===r.toast.id?{...l,...r.toast}:l)};case"DISMISS_TOAST":{const{toastId:l}=r;return l?X(l):a.toasts.forEach(m=>{X(m.id)}),{...a,toasts:a.toasts.map(m=>m.id===l||l===void 0?{...m,open:!1}:m)}}case"REMOVE_TOAST":return r.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(l=>l.id!==r.toastId)}}},A=[];let M={toasts:[]};function S(a){M=Le(M,a),A.forEach(r=>{r(M)})}function ze({...a}){const r=$e(),l=c=>S({type:"UPDATE_TOAST",toast:{...c,id:r}}),m=()=>S({type:"DISMISS_TOAST",toastId:r});return S({type:"ADD_TOAST",toast:{...a,id:r,open:!0,onOpenChange:c=>{c||m()}}}),{id:r,dismiss:m,update:l}}function le(){const[a,r]=s.useState(M);return s.useEffect(()=>(A.push(r),()=>{const l=A.indexOf(r);l>-1&&A.splice(l,1)}),[a]),{...a,toast:ze,dismiss:l=>S({type:"DISMISS_TOAST",toastId:l})}}const Re=Te,se=s.forwardRef(({className:a,...r},l)=>s.createElement(te,{ref:l,className:b("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...r}));se.displayName=te.displayName;const Be=Ce("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ne=s.forwardRef(({className:a,variant:r,...l},m)=>s.createElement(Y,{ref:m,className:b(Be({variant:r}),a),...l}));ne.displayName=Y.displayName;const Ue=s.forwardRef(({className:a,...r},l)=>s.createElement(ae,{ref:l,className:b("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...r}));Ue.displayName=ae.displayName;const oe=s.forwardRef(({className:a,...r},l)=>s.createElement(ee,{ref:l,className:b("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...r},s.createElement(re,{className:"h-4 w-4"})));oe.displayName=ee.displayName;const ie=s.forwardRef(({className:a,...r},l)=>s.createElement(Q,{ref:l,className:b("text-sm font-semibold [&+div]:text-xs",a),...r}));ie.displayName=Q.displayName;const me=s.forwardRef(({className:a,...r},l)=>s.createElement(Z,{ref:l,className:b("text-sm opacity-90",a),...r}));me.displayName=Z.displayName;function je(){const{toasts:a}=le();return e.createElement(Re,null,a.map(function({id:r,title:l,description:m,action:c,...p}){return e.createElement(ne,{key:r,...p},e.createElement("div",{className:"grid gap-1"},l&&e.createElement(ie,null,l),m&&e.createElement(me,null,m)),c,e.createElement(oe,null))}),e.createElement(se,null))}const Ke=({ResponseData:a})=>{if(!a)return;const{toast:r}=le(),l=m=>{Se(m),r({description:"Copied"})};return e.createElement(e.Fragment,null,e.createElement(je,null),e.createElement("div",{className:"w-full"},e.createElement("div",{className:"flex items-center justify-center gap-1 text-green-400 text-3xl border-b rounded-md p-2  mb-4"},e.createElement("span",{className:"bg-white rounded-full text-green-400"},e.createElement(Ae,null)),e.createElement("span",{className:"success_msg font-light text-sm"},"New Employee Created")),e.createElement("div",{className:"flex  w-full box_1"},e.createElement("div",{className:"w-full"},e.createElement(u,{htmlFor:"emailCred"},"Email address"),e.createElement("div",{id:"emailText",className:"bg-white h-12 rounded-md rounded-r-none flex items-center pl-4"},a==null?void 0:a.email)),e.createElement(F,{className:"h-12 rounded-l-none bg-orange-300  bg-theme-color self-end",onClick:()=>l(document.querySelector("#emailText").textContent)},e.createElement(W,null))),e.createElement("div",{className:"flex  w-full box_1"},e.createElement("div",{className:"w-full"},e.createElement(u,{htmlFor:"password"},"Password"),e.createElement("div",{id:"passwordText",className:"bg-white h-12 rounded-md rounded-r-none flex items-center pl-4"},a==null?void 0:a.password)),e.createElement(F,{className:" h-12 rounded-l-none bg-orange-300  bg-theme-color self-end",onClick:()=>l(document.querySelector("#passwordText").textContent)},e.createElement(W,null)))))},Ge=e.memo(Ke);function He({OptionsValue:a,setPinCodes:r}){const l=s.useRef(null),[m,c]=s.useState(!1),[p,N]=s.useState([]),[P,v]=s.useState(""),T=s.useCallback(n=>{N(d=>d.filter(E=>E.value!==n.value))},[]),k=s.useCallback(n=>{const d=l.current;d&&((n.key==="Delete"||n.key==="Backspace")&&d.value===""&&N(E=>{const C=[...E];return C.pop(),C}),n.key==="Escape"&&d.blur())},[]),_=a.filter(n=>!p.some(d=>d.value===n.value));return s.useEffect(()=>{r(p)},[p]),s.createElement(_e,{onKeyDown:k,className:"overflow-visible bg-transparent"},s.createElement("div",{className:"group rounded-md border border-input px-3 py-2 text-sm ring-offset-background focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2"},s.createElement("div",{className:"flex flex-wrap gap-1"},p.map(n=>s.createElement(ke,{key:n.value,variant:"secondary"},n.label,s.createElement("button",{className:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2",onKeyDown:d=>d.key==="Enter"&&T(n),onMouseDown:d=>{d.preventDefault(),d.stopPropagation()},onClick:()=>T(n)},s.createElement(re,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"})))),s.createElement(Fe.Input,{ref:l,value:P,onValueChange:v,onBlur:()=>c(!1),onFocus:()=>c(!0),placeholder:"Select PIN codes...",className:"ml-2 flex-1 bg-transparent outline-none placeholder:text-muted-foreground"}))),s.createElement("div",{className:"relative mt-2"},s.createElement(qe,null,m&&_.length>0?s.createElement("div",{className:"absolute top-0 z-10 w-full rounded-md border bg-popover text-popover-foreground shadow-md outline-none animate-in"},s.createElement(De,{className:"h-full overflow-auto"},_.map(n=>s.createElement(Oe,{key:n.value,onMouseDown:d=>{d.preventDefault(),d.stopPropagation()},onSelect:()=>{v(""),N(d=>[...d,n])},className:"cursor-pointer"},n.label)))):null)))}const Je=ve({fullName:g().trim().min(3,"fullName must be minimum 3 character long").required("name is Required."),gender:g().required("gender is required."),mobileNum:g().trim().length(10).required("Phone number is required.."),role:g().min(3).max(20).required("role is required field"),email:g().email().required("email address is required"),dob:g().required("date of birth is required"),pinCode:g().length(6).required("area pin code is required"),assignedPinCodesLists:ye(),address:g().max(100).required("employee address is required"),profile:he().required("profile image is required").test("type","we only support jpeg or png",a=>{var r,l;return a&&(((r=a[0])==null?void 0:r.type)==="image/jpeg"||((l=a[0])==null?void 0:l.type)==="image/png")}).test("fileSize","oops file is to large.",a=>{var r;return a&&((r=a[0])==null?void 0:r.size)<=5e6})}),ia=()=>{var I,V,$,L,z,R,B,U,j;const[a,r]=s.useState(),[l,m]=s.useState(!1),[c,p]=s.useState(),[N,P]=s.useState(null),[v,T]=s.useState(),{reset:k,resetField:_,register:n,handleSubmit:d,setValue:E,watch:C,formState:{errors:t}}=Ne({mode:"all",resolver:we(Je),defaultValues:{fullName:"",role:"",gender:"",mobileNum:"",email:"",dob:"",pinCode:"",address:"",assignedPinCodesLists:""}});console.log(C()),console.log(t);const de=localStorage.getItem("AppID"),ce=o=>{console.log(o);const i=new FormData;o.assignedPinCodesLists.map(x=>{i.append("assignedPinCode[]",x)}),i.append("fullName",o.fullName),i.append("role",o.role),i.append("dob",o.dob),i.append("gender",o.gender),i.append("email",o.email),i.append("mobileNum",o.mobileNum),i.append("pinCode",o.pinCode),i.append("avatar",o==null?void 0:o.profile[0]),i.append("address",o.address),(async x=>{console.log(x);try{const f=await fetch(`${q.BACKEND_URL}/api/admin/employee`,{method:"POST",headers:{Authorization:`Bearer ${de}`},body:i});if(!f.ok)throw new Error("Oops Something went wrong");const K=await f.json();K.success&&(m(!0),k(),P(()=>K))}catch(f){console.log(f)}})(o)},ue=o=>{const i=o.map((h,x)=>[h.value]);E("assignedPinCodesLists",i)};if(s.useEffect(()=>{(async()=>{try{const i=await fetch(`${q&&q.BACKEND_URL}/api/admin/areas`);if(!i.ok)throw new Error("Failed to fetch pin codes");const h=await i.json();if(h){const x=h.map(f=>({value:f.areaPinCode,label:`${f.areaPinCode} ${f.district}`}));T(x)}}catch(i){throw new Error(i==null?void 0:i.message)}})()},[]),!!v)return e.createElement(e.Fragment,null,e.createElement("div",{className:"bg-neutral-100 dark:bg-gray-700 rounded-lg border p-6 mx-auto w-1/2",id:"oderPreview"},e.createElement("div",{className:"cardHeader w-full "},e.createElement("h1",{className:"border-b pb-2  font-medium"},e.createElement("span",{className:"flex items-center  gap-2"},e.createElement("span",{className:"bg-orange-300 rounded-md p-2"},e.createElement(Me,{className:"bg-orange-300 text-white"})),e.createElement("span",{className:"text-3xl font-light uppercase opacity-40 text-slate-600"},"Create new Employee")))),l&&l?e.createElement("div",{id:"userLoginCredential",className:"userLoginCredential_Wrapper mt-12 errMsgStyle"},e.createElement(Ge,{ResponseData:N})):e.createElement(e.Fragment,null,e.createElement("div",{className:"cardBody bg-white dark:bg-slate-800 rounded-md border p-6 mt-6"},e.createElement("div",{className:"newEmployee "},e.createElement("form",{onSubmit:d(ce),id:"newPackageForm"},e.createElement("div",{className:"grid gap-2 w-full my-4"},e.createElement(u,{htmlFor:"fullName"},e.createElement("div",{className:"labelText flex  "},"Employee name",e.createElement("span",{className:"text-red-400 mt-[3.5px] pl-1"},"*"))),e.createElement(y,{id:"fullName",name:"fullName",type:"text",placeholder:"Employee Name",required:!0,className:"h-12 focus-visible:ring-offset-0 focus-visible:ring-0",...n("fullName")}),e.createElement("div",{className:`${t!=null&&t.fullName?"block text-red-400 text-sm errMsgStyle capitalize":"text-red-400 text-sm errMsgStyle hidden"} `},t!=null&&t.fullName?(I=t.fullName)==null?void 0:I.message:".")),e.createElement("div",{className:"grid gap-2 w-full my-4"},e.createElement(u,{htmlFor:"mobileNum"},e.createElement("div",{className:"labelText flex  "},"Gender",e.createElement("span",{className:"text-red-400 mt-[3.5px] pl-1"},"*"))),e.createElement(G,{name:"gender",className:"h-12 focus-visible:ring-offset-0 focus-visible:ring-0",onValueChange:o=>{p(o),E("gender",o,{shouldValidate:!0})}},e.createElement(H,{className:"h-12 focus-visible:ring-offset-0 focus-visible:ring-0"},c&&c?c:"Select your gender"),e.createElement(J,null,e.createElement(w,{value:"male"},"Male"),e.createElement(w,{value:"female"},"Female"),e.createElement(w,{value:"other"},"Other."))),e.createElement("input",{type:"hidden",...n("gender",{required:"Please select a gender"})}),e.createElement("div",{className:`${t!=null&&t.gender?"block text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},t!=null&&t.gender?(V=t.gender)==null?void 0:V.message:".")),e.createElement("div",{className:"grid gap-2 w-full my-4"},e.createElement(u,null,"Choose role"),e.createElement(G,{onValueChange:o=>{E("role",o,{shouldValidate:!0})}},e.createElement(H,{className:"w-full"},e.createElement(be,{placeholder:"Manager"})),e.createElement(J,null,e.createElement(w,{value:"manager"},"Manager"),e.createElement(w,{value:"supervisor"},"Supervisor")))),e.createElement("div",{className:"grid gap-2 w-full my-4"},e.createElement(u,{htmlFor:"mobileNum"},e.createElement("div",{className:"labelText flex  "},"Mobile number",e.createElement("span",{className:"text-red-400 mt-[3.5px] pl-1"},"*"))),e.createElement(y,{id:"mobileNum",name:"mobileNum",type:"number",placeholder:"Employee mobile number",required:!0,className:"h-12 focus-visible:ring-offset-0 focus-visible:ring-0",...n("mobileNum")}),e.createElement("div",{className:`${t!=null&&t.mobileNum?"block capitalize text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},t!=null&&t.mobileNum?($=t.mobileNum)==null?void 0:$.message:".")),e.createElement("div",{className:"grid gap-2 w-full my-4"},e.createElement(u,{htmlFor:"email"},e.createElement("div",{className:"labelText flex  "},"Email address",e.createElement("span",{className:"text-red-400 mt-[3.5px] pl-1"},"*"))),e.createElement(y,{id:"email",name:"email",type:"email",placeholder:"Email address.",className:"h-12 focus-visible:ring-offset-0 focus-visible:ring-0",required:!0,...n("email")}),e.createElement("div",{className:`${t!=null&&t.email?"block capitalize text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},e.createElement("span",{className:"capitalize"},t!=null&&t.email?(L=t.email)==null?void 0:L.message:"."))),e.createElement("div",{className:"grid gap-2 w-full my-4"},e.createElement(u,{htmlFor:"profile"},e.createElement("div",{className:"labelText flex  "},"Profile image",e.createElement("span",{className:"text-red-400 mt-[3.5px] pl-1"},"*"))),e.createElement("input",{type:"file",id:"profile",className:"border p-2 w-full  rounded-md file:bg-orange-100 file:outline-none file:border-none file:rounded-md file:text-gray-700 file:font-medium text-gray-700",...n("profile")}),e.createElement("div",{className:`${t!=null&&t.profile?"block capitalize text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},t!=null&&t.profile?(z=t.profile)==null?void 0:z.message:".")),e.createElement("div",{className:"grid gap-2  mt-4 w-full"},e.createElement(u,{htmlFor:"address"},e.createElement("div",{className:"labelText flex  "},"Date of birth",e.createElement("span",{className:"text-red-400 mt-[3.5px] pl-1"},"*"))),e.createElement(y,{name:"dob",id:"dob",type:"date",required:!0,...n("dob")}),e.createElement("div",{className:`${t!=null&&t.dob?"block capitalize text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},t!=null&&t.dob?(R=t.dob)==null?void 0:R.message:".")),e.createElement("div",{className:"grid gap-2 w-full my-4"},e.createElement(u,{htmlFor:"pinCode"},e.createElement("div",{className:"labelText flex items-center gap-1"},e.createElement("span",null,e.createElement("span",null,"Assign Pincode"),e.createElement("span",{className:"text-red-400 mt-[3.5px] pl-1"},"*")),e.createElement("span",{title:"info"},e.createElement(pe,null,e.createElement(fe,null,e.createElement(ge,null,e.createElement(Pe,{className:"size-3 cursor-pointer"})),e.createElement(Ee,null,e.createElement("p",null,"Enter the area pin code to assign a manager who will manage delivery partners in this area"))))))),e.createElement(He,{OptionsValue:v,setPinCodes:ue}),e.createElement("div",{className:`${t!=null&&t.assignedPinCodesLists?"block capitalize text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},t!=null&&t.assignedPinCodesLists?(B=t.assignedPinCodesLists)==null?void 0:B.message:".")),e.createElement("div",{className:"grid gap-2 w-full my-4"},e.createElement(u,{htmlFor:"pinCode"},e.createElement("div",{className:"labelText flex  "},"Pin code",e.createElement("span",{className:"text-red-400 mt-[3.5px] pl-1"},"*"))),e.createElement(y,{id:"pinCode",type:"number",placeholder:"Area pin code",className:"h-12 focus-visible:ring-offset-0 focus-visible:ring-0",required:!0,...n("pinCode")}),e.createElement("div",{className:`${t!=null&&t.pinCode?"block capitalize text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},t!=null&&t.pinCode?(U=t.pinCode)==null?void 0:U.message:".")),e.createElement("div",{className:"grid gap-2 w-full my-4"},e.createElement(u,{htmlFor:"address"},e.createElement("div",{className:"labelText flex  "},"Address",e.createElement("span",{className:"text-red-400 mt-[3.5px] pl-1"},"*"))),e.createElement(xe,{id:"address",placeholder:"Address.",className:"h-18 focus-visible:ring-offset-0 focus-visible:ring-0",...n("address")}),e.createElement("div",{className:`${t!=null&&t.address?"block capitalize text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},t!=null&&t.address?(j=t.address)==null?void 0:j.message:".")),e.createElement(F,{className:"w-full mt-4 bg-orange-300 h-12 bg-theme-color"},"Create Now")))))))};export{ia as default};
