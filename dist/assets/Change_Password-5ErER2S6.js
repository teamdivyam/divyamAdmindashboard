import{r as b,a as e}from"./react-BM40__SY.js";import{u as y}from"./react-hook-form-BN_naEWj.js";import{L as p,I as l,B as N,_ as S}from"./index-fHwZLE-T.js";import{c as x,a as c}from"./yup-DazPcaNu.js";import{o as v}from"./@hookform-D0jWCfUg.js";import{T as D}from"./sonner-UVoS8Wfh.js";import{w as d}from"./sonner-CBLC4ypc.js";import{D as C,a as L,b as T,c as q,d as I}from"./dialog-CwGvPLDO.js";import{L as O}from"./Loader-CZaHulb3.js";import{u as _}from"./react-router-DRLUvzUh.js";import"./attr-accept-CkmCM30I.js";import"./react-dom-BKOhnANa.js";import"./scheduler-C323NY8X.js";import"./@radix-ui-Bvz2HI7m.js";import"./react-remove-scroll-DR3rXkvR.js";import"./tslib-eMSY344_.js";import"./react-remove-scroll-bar-BhARyL5A.js";import"./react-style-singleton-DeLYGn6u.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-CISbmOY4.js";import"./use-callback-ref-Bp38XRF0.js";import"./aria-hidden-DQ5UC2Eg.js";import"./@floating-ui-DHl6l98I.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./react-google-recaptcha-C2_uU7Xm.js";import"./prop-types-DFk7-3jw.js";import"./react-async-script-BL5K2liq.js";import"./hoist-non-react-statics-CPzswhKp.js";import"./react-is-CnyDuYXe.js";import"./react-redux-DNfLtVbP.js";import"./use-sync-external-store-H6R0MgJP.js";import"./@reduxjs-DtXgGc0i.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./jwt-decode-VWaDGczM.js";import"./lucide-react-BWZ2dPnB.js";import"./recharts-BSzae8HI.js";import"./lodash-DiYzGN5e.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./react-smooth-DYD8lKML.js";import"./fast-equals-BIyco3rD.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-CEDTliZZ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-BRe_pui0.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-tjHGMS6M.js";import"./cookie--_YQFYBD.js";import"./next-themes-05dgSDaz.js";const $=x({password:c().min(6,"Password must be minimum 6 character Long").required("Password  is required"),newPassword:c().min(6,"Password must be minimum 6 character Long").required("Enter your new password")}).required("Please confirm the password"),Je=()=>{var m,i;const w=_(),[u,a]=b.useState(!1),{register:o,handleSubmit:g,reset:s,formState:{errors:t}}=y({mode:"all",resolver:v($),defaultValues:{password:"",newPassword:""}}),h=()=>{a(!0),localStorage.removeItem("AppID"),setTimeout(()=>{w("/login")},5e3)},f=localStorage.getItem("AppID"),E=P=>{(async()=>{try{const r=await(await fetch(`${S.BACKEND_URL}/api/admin/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify(P)})).json();r.success===!0&&(d("Password changed successfully.."),h()),r.success===!1&&d(r==null?void 0:r.msg),s()}catch(n){console.log(n.message),s()}})()};return e.createElement("div",{className:"change_password_wrapper "},e.createElement(C,{open:u,onOpenChange:a},e.createElement(L,null,e.createElement(T,null,e.createElement(q,null,"Password changed successfully"),e.createElement(I,null,e.createElement("span",{className:"flex gap-4"},e.createElement(O,null),e.createElement("span",null,"Password has been changed successfully. You are being redirected to the login page")))))),e.createElement(D,null),e.createElement("h2",{className:"font-medium text-xl pb-2 border-b mb-8"},"Change Password"),e.createElement("form",{onSubmit:g(E)},e.createElement("div",{className:"grid gap-4"},e.createElement("div",{className:"grid gap-2"},e.createElement(p,{htmlFor:"email"},"Password"),e.createElement(l,{id:"password",type:"password",placeholder:"Enter your old Password",required:!0,className:"h-12",...o("password")}),e.createElement("div",{className:`${t!=null&&t.password?"block text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},t!=null&&t.password?(m=t.password)==null?void 0:m.message:".")),e.createElement("div",{className:"grid gap-2"},e.createElement(p,{htmlFor:"newPassword"},"New Password"),e.createElement(l,{id:"newPassword",type:"password",placeholder:"Enter new password",required:!0,className:"h-12",...o("newPassword")}),e.createElement("div",{className:`${t!=null&&t.newPassword?"block text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},t!=null&&t.newPassword?(i=t.newPassword)==null?void 0:i.message:"."))),e.createElement("div",{className:"change-password-action flex justify-end"},e.createElement(N,{className:"mt-4 bg-theme-color w-32 dark:text-white"},"Change Now"))))};export{Je as default};
