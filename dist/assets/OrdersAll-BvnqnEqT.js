import{T as P,a as C,b as I,c as y,d as u,e as v,f as s}from"./table-D59fVxqX.js";import{r as E,u as M,a as $,R as e,N,D as k,b as R,c as G,d as K,e as F,f as O,_ as d,o as L,g as j,h as U}from"./index-CqUjVgox.js";import{E as B,P as H,a as V,b as o,c as z,d as g,e as q,f as Y}from"./pagination-CBf_EoO0.js";import{T as J}from"./sonner-iBYa7rjY.js";import{w as h}from"./index-DLdLSjkK.js";import{S as Q}from"./search-DXH-IQ_M.js";import"./chevron-left-Dv4wvR6C.js";const W=j({searchKey:U().min(5,"Invalid order id").max(20).required("Invalid order id.")}),X={page:1,limit:16},Z=(a,i)=>{switch(i.type){case"FIRST_PAGE":return{...a,page:a.page=1};case"SET_PAGE_NUM":return{...a,page:i.payload};case"INC_PAGE":return{...a,page:a.page+1};case"DEC_PAGE":return{...a,page:a.page-1};case"SET_PAGE_LIMIT":return{...a,limit:i.payload};default:return a}};function oe(){const[a,i]=E.useState(null),f=localStorage.getItem("AppID"),S=M(),[r,m]=E.useReducer(Z,X),{register:A,handleSubmit:T,reset:ee,formState:{errors:c}}=$({mode:"all",resolver:L(W),defaultValues:{searchKey:""}}),_=t=>{(async()=>{try{const p=await(await fetch(`${d&&d.BACKEND_URL}/api/admin/search-orders?searchKey=${t==null?void 0:t.searchKey}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`,Accept:"application/json, application/xml"}})).json();p.success===!0?S(`/dashboard/order/${p._id}`):h.error("Invalid order id")}catch{h.error("please try again later.")}})()};E.useEffect(()=>{(async()=>{try{const l=await(await fetch(`${d.BACKEND_URL}/api/admin/order?page=${r==null?void 0:r.page}&limit=${r==null?void 0:r.limit}`,{method:"GET",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}})).json();i(l),console.log(l)}catch(n){console.log(n)}})()},[r.page]);const b=t=>t=="Pending"?e.createElement(e.Fragment,null,e.createElement("span",{className:"text-orange-500"},t)):t=="Success"||t=="Delivered"||t=="Shipped"?e.createElement(e.Fragment,null,e.createElement("span",{className:"text-green-500"},t)):t=="Failed"||t=="Declined"?e.createElement(e.Fragment,null,e.createElement("span",{className:"text-red-500"},t)):e.createElement(e.Fragment,null,e.createElement("span",{className:"text-slate-500 font-bold"},t));return E.useEffect(()=>{var t,n;(t=c==null?void 0:c.searchKey)!=null&&t.message&&h.error((n=c==null?void 0:c.searchKey)==null?void 0:n.message)},[c.searchKey]),a&&!a.length?e.createElement("span",{className:"block lg:mt-20 text-center font-medium text-neutral-500"},"Oops! There's no data to show right now. It looks like no orders are available ðŸ˜Š"):e.createElement(e.Fragment,null,e.createElement("div",{className:"w-full "},e.createElement(J,{richColors:!0}),e.createElement("form",{className:"flex justify-center  w-full px-3 py-4",onSubmit:T(_)},e.createElement("input",{type:"text",name:"search",id:"search",placeholder:"Search with order id",className:"border px-4 shadow-sm  w-full rounded-lg text-lg rounded-r-none dark:bg-slate-600",...A("searchKey")}),e.createElement("button",{type:"submit",className:"bg-orange-400 rounded-md p-2 text-white rounded-l-none"},e.createElement(Q,{className:"size-8"}))),e.createElement(P,null,e.createElement(C,null,"."),e.createElement(I,null,e.createElement(y,null,e.createElement(u,{className:"w-[300px]"},"Order Id"),e.createElement(u,null,"Status"),e.createElement(u,null,"Payment Method"),e.createElement(u,{className:"text-right"},"Amount"),e.createElement(u,{className:"text-right"},"Transaction Date"))),e.createElement(v,null,a&&a.length>0?a.map((t,n)=>{const l=new Date(t.createdAt),p=String(l.getDate()).padStart(2,"0"),w=String(l.getMonth()+1).padStart(2,"0"),x=l.getFullYear(),D=`${p}/${w}/${x}`;return e.createElement(y,{key:n},e.createElement(s,{className:"font-medium"},e.createElement(N,{to:`${t._id}`},t.orderId.split("_").at(1))),e.createElement(s,null,b(t.orderStatus)),e.createElement(s,null,t.payment.method),e.createElement(s,{className:"text-right"},t.totalAmount),e.createElement(s,{className:"text-right"},D),e.createElement(s,{className:"text-right"},e.createElement(k,null,e.createElement(R,null,e.createElement(B,null)),e.createElement(G,null,e.createElement(K,null,"Action"),e.createElement(F,null),e.createElement(O,{className:"cursor-pointer"},e.createElement(N,{to:`${t._id}`},"View More"))))))}):e.createElement("h1",null,"0 Orders available.."))),e.createElement(H,null,e.createElement(V,null,e.createElement(o,null,e.createElement(z,{className:"cursor-pointer",onClick:()=>{(r==null?void 0:r.page)==1||m({type:"FIRST_PAGE"})}})),e.createElement(o,null,e.createElement(g,{className:"cursor-pointer",isActive:!0,onClick:()=>{m({type:"SET_PAGE_NUM",payload:1})}},"1")),e.createElement(o,null,e.createElement(g,{className:"cursor-pointer",isActive:!0,onClick:()=>{m({type:"SET_PAGE_NUM",payload:2})}},"2")),e.createElement(o,null,e.createElement(g,{className:"cursor-pointer",isActive:!0,onClick:()=>{m({type:"SET_PAGE_NUM",payload:3})}},"3")),e.createElement(o,null,e.createElement(q,null)),e.createElement(o,null,e.createElement(Y,{className:"cursor-pointer",onClick:()=>{m({type:"INC_PAGE"})}}))))))}export{oe as default};
