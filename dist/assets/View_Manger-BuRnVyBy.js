import{a as e,r as s}from"./react-BM40__SY.js";import{B as f,_ as g}from"./index-fHwZLE-T.js";import{T as A}from"./sonner-UVoS8Wfh.js";import{B as N}from"./badge-DAiYVQtE.js";import{D as w,a as b,b as y,c as S,d as x}from"./dialog-CwGvPLDO.js";import{a as M,k as _,h as k,m as I,n as j,o as z,T as B}from"./lucide-react-BWZ2dPnB.js";import{u as D,d as P}from"./react-router-DRLUvzUh.js";import{f as v}from"./date-fns-BZLmoul0.js";import"./attr-accept-CkmCM30I.js";import"./react-dom-BKOhnANa.js";import"./scheduler-C323NY8X.js";import"./@radix-ui-Bvz2HI7m.js";import"./react-remove-scroll-DR3rXkvR.js";import"./tslib-eMSY344_.js";import"./react-remove-scroll-bar-BhARyL5A.js";import"./react-style-singleton-DeLYGn6u.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-CISbmOY4.js";import"./use-callback-ref-Bp38XRF0.js";import"./aria-hidden-DQ5UC2Eg.js";import"./@floating-ui-DHl6l98I.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./react-google-recaptcha-C2_uU7Xm.js";import"./prop-types-DFk7-3jw.js";import"./react-async-script-BL5K2liq.js";import"./hoist-non-react-statics-CPzswhKp.js";import"./react-is-CnyDuYXe.js";import"./@hookform-D0jWCfUg.js";import"./react-hook-form-BN_naEWj.js";import"./yup-DazPcaNu.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-tjHGMS6M.js";import"./react-redux-DNfLtVbP.js";import"./use-sync-external-store-H6R0MgJP.js";import"./@reduxjs-DtXgGc0i.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./jwt-decode-VWaDGczM.js";import"./sonner-CBLC4ypc.js";import"./recharts-BSzae8HI.js";import"./lodash-DiYzGN5e.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./react-smooth-DYD8lKML.js";import"./fast-equals-BIyco3rD.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-CEDTliZZ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-BRe_pui0.js";import"./cookie--_YQFYBD.js";import"./next-themes-05dgSDaz.js";const $=({TextContent:t,ManagerInfo:n})=>{const o=n._id,m=t==null?void 0:t._id;if(!t)return;const c=D(),u=localStorage.getItem("AppID"),r=async()=>{const p={managerObjId:o,superVisorObjId:m};try{await(await fetch(`${g.BACKEND_URL}/api/admin/set-supervisor`,{method:"POST",headers:{authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify(p)})).json()&&c(0)}catch(E){throw new Error(E)}},i=()=>{r()};return e.createElement("div",{id:"superVisorCardWrapper",className:"flex border-b items-center  justify-between pb-3"},e.createElement("div",{className:"flex"},e.createElement("img",{src:"https://i.pravatar.cc/300",className:"size-10 rounded-full"}),e.createElement("div",{className:"pl-4"},e.createElement("h2",{className:"font-semibold capitalize"},t==null?void 0:t.fullName),e.createElement("p",null,t==null?void 0:t.address))),e.createElement(f,{variant:"outline",onClick:i},"Select Supervisor ",e.createElement(M,null)))},C=e.memo($),R=({ManagerID:t})=>{const[n,o]=s.useState(),[m,c]=s.useState(),u=localStorage.getItem("AppID")||void 0;return s.useEffect(()=>{(async()=>{try{const p=await(await fetch(`${g.BACKEND_URL}/api/admin/get-all-unassigned-supervisor`,{method:"GET",headers:{authorization:`Bearer ${u}`}})).json();p&&o(p)}catch(i){throw new Error(i)}})()},[]),e.createElement(e.Fragment,null,e.createElement("div",{className:"superVisorListsWrapper flex flex-col gap-4 "},e.createElement("form",{className:" flex"},e.createElement("input",{type:"text",placeholder:"Search supervisors",className:"w-full border rounded-sm p-2 outline-none rounded-r-none",onChange:r=>{c(()=>r.target.value)}}),e.createElement("button",{className:"bg-orange-200 px-2 rounded-sm rounded-l-none text-neutral-500"},e.createElement(_,null))),e.createElement("div",{className:"h-96 overflow-y-auto border p-4 rounded-sm"},n&&n.length?n.map((r,i)=>e.createElement(C,{key:i,TextContent:r,ManagerInfo:t})):e.createElement("p",{className:"text-center text-slate-400"},"No records founds.."))))},T=e.memo(R),V=({IsDialogVisible:t,ManagerInfo:n})=>{const[o,m]=s.useState(!1);return s.useEffect(()=>{m(t)},[t]),e.createElement(e.Fragment,null,e.createElement(w,{open:o,onOpenChange:m},e.createElement(b,null,e.createElement(y,null,e.createElement(S,null,"Set Supervisor"),e.createElement(x,null,e.createElement(T,{ManagerID:n}))))))},O=e.memo(V),L=()=>e.createElement(e.Fragment,null,e.createElement("svg",{fill:"white",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e.createElement("path",{d:"M16 2v2h3.586l-3.972 3.972c-1.54-1.231-3.489-1.972-5.614-1.972-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-2.125-.741-4.074-1.972-5.614l3.972-3.972v3.586h2v-7h-7zm-6 20c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z"}))),F=()=>e.createElement("svg",{width:"24px",height:"24px",fill:"white",viewBox:"0 0 1024 1024",className:"icon",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{fill:"#ffffff",d:"M512 640a256 256 0 100-512 256 256 0 000 512zm0 64a320 320 0 110-640 320 320 0 010 640z"}),e.createElement("path",{fill:"#ffffff",d:"M512 640q32 0 32 32v256q0 32-32 32t-32-32V672q0-32 32-32z"}),e.createElement("path",{fill:"#ffffff",d:"M352 800h320q32 0 32 32t-32 32H352q-32 0-32-32t32-32z"})),et=()=>{const[t,n]=s.useState(null),{EMP_ID:o}=P(),m=D(),c=localStorage.getItem("AppID")||void 0,[u,r]=s.useState(!1),[i,p]=s.useState(!1),E=()=>{(async()=>{try{const l=await fetch(`${APP&&APP.BACKEND_URL}/api/admin/employee/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json",Accept:"application/json, application/xml","Accept-Language":"en_US"}});if(!l.ok){alert("Unknown error.");return}l.ok&&m(-1)}catch(l){console.log(l)}})()},h=a=>{(async()=>{try{(await(await fetch(`${g.BACKEND_URL}/api/admin/unset-supervisor`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({managerID:o,superVisorID:a._id})})).json()).success&&m(0)}catch(d){throw new Error(d)}})()};return s.useEffect(()=>{(async()=>{try{const l=await fetch(`${g.BACKEND_URL}/api/admin/employee/${o}`,{method:"GET",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});if(!l.ok)return;const d=await l.json();d&&n(d)}catch(l){console.log(l)}})()},[]),e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement(A,null),e.createElement("div",{className:"bg-orange-50 dark:bg-gray-700 rounded-lg border p-6 mx-auto w-1/2",id:"oderPreview"},e.createElement("div",{className:"cardHeader flex justify-between"},e.createElement(N,{variant:"destructive",className:"bg-orange-400 py-1 cursor-pointer hover:bg-orange-400 "},e.createElement(k,null),e.createElement("span",{className:"pl-2 uppercase font-medium text-white rounded-sm px-3"},t&&t.role)),e.createElement(N,{variant:"destructive",className:"bg-white text-neutral-500 hover:bg-white"},e.createElement("span",{className:"font-"},"Joined Date:"),e.createElement("span",{className:`inline-block uppercase pl-1 rounded-full  text-neutral-500
      font-medium 
      `},`${t&&v(t.createdAt,"MM-dd-yyyy")}`))),e.createElement("div",{className:"cardBody bg-white dark:bg-slate-800 rounded-md border p-6 mt-6"},e.createElement("div",{className:"userProfile flex flex-row "},e.createElement("img",{src:"https://i.pravatar.cc/300",className:"size-48 rounded-lg shadow-sm"}),e.createElement("div",{className:"profileText pt-10 pl-10"},e.createElement("h2",{className:"font-medium text-neutral-600 text-3xl flex items-center"},t&&t.fullName?t.fullName:"Not Available",e.createElement("span",{title:t&&t.gender=="male"?"Male":"Female",className:"rounded-full size-8 flex justify-center items-center ml-2 p-2 text-white bg-orange-400"},t&&t.gender=="male"?e.createElement(L,null):e.createElement(F,null))),e.createElement("p",{className:"mobileNum flex items-center pt-2 text-neutral-400"},t&&t.mobileNum?e.createElement(e.Fragment,null,e.createElement(I,null),e.createElement("span",{className:"pl-2"},t.mobileNum)):"Mobile number is not available"),e.createElement("p",{className:"age  mt-2  flex items-center  text-neutral-400"},t&&t.dob?e.createElement(e.Fragment,null,e.createElement(j,null),e.createElement("span",{className:"pl-2 font-normal"},v(t.dob,"MM-dd-yyyy"))):"Date of birth is not available"),e.createElement("p",{className:"mt-2 flex text-neutral-400 "},t&&t.address?e.createElement(e.Fragment,null,e.createElement(z,{className:""}),e.createElement("span",{className:"pl-2"},`${t.address}  `,e.createElement("span",{className:"font-medium font-"},t&&t.address))):"user Address is not available")))),t&&(t==null?void 0:t.role)==="manager"?e.createElement("div",{className:"border-b mt-4  p-2 text-white"},e.createElement("h2",{className:"text-neutral-400 text-nowrap font-normal capitalize"},"Choose supervisor"),e.createElement(O,{IsDialogVisible:i,ManagerInfo:t}),e.createElement("button",{className:"w-full border border-orange-200 rounded-md bg-orange-100 shadow-sm text-gray-600  p-2  text-left text-lg",onClick:()=>{p(a=>!a)}},"Choose now")):null,e.createElement("div",{className:"flex flex-col gap-2 mt-3"},(t==null?void 0:t.supervisors)&&t.supervisors.map(a=>e.createElement("div",{key:a._id,className:"bg-[#BE9E882D]   p-2 flex rounded-md justify-between items-center"},e.createElement("a",{className:"cursor-pointer",onClick:()=>{window.location.href=`/dashboard/employee/${a._id}`}},e.createElement("h4",{className:"capitalize tex-md font-medium text-neutral-500"},a==null?void 0:a.fullName)),e.createElement(f,{variant:"outline",size:"icon",className:"bg-red-500 hover:bg-red-400 border-0",onClick:()=>h(a)},e.createElement(B,{className:"text-white"}))))),e.createElement("div",{id:"userProfileDeleteAction",className:"w-full flex justify-end"},e.createElement(f,{variant:"destructive",className:"mt-8 flex justify-center items-center w-32 ",onClick:()=>{r(a=>!a)}},"Delete"))),e.createElement(w,{open:u,onOpenChange:r},e.createElement(b,null,e.createElement(y,null,e.createElement(S,null,"Are you sure ?"),e.createElement(x,null,"This action cannot be undone. This will permanently delete your account and remove your data from our servers.",e.createElement("span",{className:" mt-4 flex justify-end gap-3"},e.createElement(f,{variant:"secondary",className:"w-28 ",onClick:()=>r(a=>!a)},"Cancel"),e.createElement(f,{variant:"destructive",className:"w-28 ",onClick:E},"Confirm"))))))))};export{et as default};
