import{p as J,R as n,N as te,_ as v,am as R,z as re,u as ne,r as u,a as ae,o as se,g as oe,h as le}from"./index-CqUjVgox.js";import{T as ie}from"./sonner-iBYa7rjY.js";import{w as ce}from"./index-DLdLSjkK.js";import{S as ue}from"./search-DXH-IQ_M.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=J("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=J("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),X=({User:r,isSearchResults:i})=>n.createElement("li",{id:"userLists",className:i?"bg-green-50 dark:bg-slate-500 border-neutral-400  p-4 flex w-full flex-row justify-between items-center rounded-2xl":"dark:bg-slate-500 border-neutral-400 bg-neutral-200 p-4 flex w-full flex-row justify-between items-center rounded-2xl"},n.createElement("div",{className:"flex flex-row"},n.createElement("img",{src:"https://i.pravatar.cc/300",className:"size-16 rounded-full"}),n.createElement("div",{className:"profileListTextContent pl-8 content-center	"},n.createElement("h3",{className:"font-bold"},r!=null&&r.fullName?r.fullName:"Not Available."),n.createElement("h4",{className:"text-neutral-600 font-light dark:text-white capitalize"},r!=null&&r.mobileNum?r.mobileNum:"Not Available."))),n.createElement("div",{className:"viewMore"},n.createElement(te,{to:`${v&&v.APP_URL}/dashboard/user/${r._id}`,className:"text-neutral-500"},"View More")));var K,Y;function de(){if(Y)return K;Y=1;var r="Expected a function",i=NaN,P="[object Symbol]",N=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,I=/^0o[0-7]+$/i,f=parseInt,k=typeof R=="object"&&R&&R.Object===Object&&R,L=typeof self=="object"&&self&&self.Object===Object&&self,j=k||L||Function("return this")(),$=Object.prototype,p=$.toString,F=Math.max,M=Math.min,T=function(){return j.Date.now()};function O(e,t,s){var o,m,_,g,l,d,E=0,V=!1,x=!1,z=!0;if(typeof e!="function")throw new TypeError(r);t=A(t)||0,b(s)&&(V=!!s.leading,x="maxWait"in s,_=x?F(A(s.maxWait)||0,t):_,z="trailing"in s?!!s.trailing:z);function B(a){var c=o,y=m;return o=m=void 0,E=a,g=e.apply(y,c),g}function Q(a){return E=a,l=setTimeout(C,t),V?B(a):g}function Z(a){var c=a-d,y=a-E,W=t-c;return x?M(W,_-y):W}function q(a){var c=a-d,y=a-E;return d===void 0||c>=t||c<0||x&&y>=_}function C(){var a=T();if(q(a))return H(a);l=setTimeout(C,Z(a))}function H(a){return l=void 0,z&&o?B(a):(o=m=void 0,g)}function U(){l!==void 0&&clearTimeout(l),E=0,o=d=m=l=void 0}function ee(){return l===void 0?g:H(T())}function G(){var a=T(),c=q(a);if(o=arguments,m=this,d=a,c){if(l===void 0)return Q(d);if(x)return l=setTimeout(C,t),B(d)}return l===void 0&&(l=setTimeout(C,t)),g}return G.cancel=U,G.flush=ee,G}function b(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function w(e){return!!e&&typeof e=="object"}function D(e){return typeof e=="symbol"||w(e)&&p.call(e)==P}function A(e){if(typeof e=="number")return e;if(D(e))return i;if(b(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=b(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(N,"");var s=S.test(e);return s||I.test(e)?f(e.slice(2),s?2:8):h.test(e)?i:+e}return K=O,K}var ge=de();const he=re(ge),pe=oe({searchKey:le().trim().max(50).required("Searchbox can't be blank")}),be={page:1,limit:9,isPrevPageAvailable:!1,isNextPageAvailable:!1},Ee=(r,i)=>{switch(i.type){case"NEXT_PAGE":return r.page>=1&&(r.isPrevPageAvailable=!0),{...r,page:r.page+1};case"PREV_PAGE":return r.page<=1?r:{...r,page:r.page-1}}},Se=()=>{ne();const[r,i]=u.useState(null),[P,N]=u.useState(!0),[h,S]=u.useState([]),I=localStorage.getItem("AppID"),[f,k]=u.useReducer(Ee,be),[L,j]=u.useState(),{register:$,handleSubmit:p,reset:F,setValue:M,formState:{error:T},watch:O}=ae({mode:"all",resolver:se(pe)}),b=localStorage.getItem("AppID")||void 0,w=t=>{(async()=>{try{const o=await fetch(`${v&&v.BACKEND_URL}/api/admin/search-user?s=${t==null?void 0:t.searchKey}`,{cache:"no-cache",method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`}});o.ok||ce.error("No Records founds");const m=await o.json();S(m)}catch(o){console.log(o)}})()},D=u.useCallback(he(p(w),1e3),[]),A=()=>{k({type:"NEXT_PAGE"})},e=()=>{k({type:"PREV_PAGE"})};return u.useEffect(()=>{const{searchKey:t}=O();(t==null?void 0:t.length)<=3&&S(null)},[L,j]),u.useEffect(()=>{(async()=>{try{const s=await fetch(`${v.BACKEND_URL}/api/admin/users?page=${f.page}&limit=${f.limit}`,{method:"GET",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json",Accept:"application/json"}});if(!s.ok){console.log("Toaster.."),i([]);return}const o=await s.json();N(!1),i(o)}catch(s){console.error("Error fetching data:",s),N(!0)}})()},[f]),r&&!r.length?n.createElement("span",{className:"block lg:mt-20 text-center font-medium text-neutral-500"},"You've reached the end of the list. Go back or consider ways to inspire more users to sign up"):n.createElement(n.Fragment,null,P?null:n.createElement(n.Fragment,null,n.createElement("div",{id:"userProfile_wrapper ",className:`bg-neutral-50 border p-12  w-1/2 rounded-md mx-auto relative
             dark:bg-slate-700`},n.createElement(ie,{richColors:!0}),n.createElement("form",{onSubmit:p(w),onChange:D,className:" w-full  flex justify-between items-center  gap-2 p-2"},n.createElement("input",{type:"search",name:"userSearch",id:"userSearch",className:"bg-white rounded-full border w-full py-3 px-6  focus:outline-none focus:border-orange-200 focus:ring-1 focus:ring-sky-50 dark:bg-slate-600 dark:border dark:border-orange-100 dark:placeholder:text-gray-200",placeholder:"Search users..",onKeyDown:t=>{p(),j(t.target.value)},...$("searchKey")}),n.createElement("button",{className:"text-neutral-400 dark:text-orange-200 "},n.createElement(ue,{className:"size-8"}))),n.createElement("ul",{className:"flex lg:flex-col gap-3 lg:mt-4"},h&&h.length>0?h.map((t,s)=>n.createElement(X,{key:t._id,User:t,isSearchResults:!0})):n.createElement("ul",{className:"flex lg:flex-col gap-3 lg:mt-4"},r&&r.length?r.map((t,s)=>n.createElement(X,{key:t._id,User:t,isSearchResults:!1})):null)),r.length&&r.length?n.createElement("div",{className:"flex gap-2 justify-end"},f&&f.isPrevPageAvailable&&n.createElement("button",{onClick:e,role:"button",title:"next",className:"bg-orange-300 transition-colors ease-in hover:bg-orange-400 text-white size-10 flex justify-center items-center mt-10 rounded-full"},n.createElement(fe,null)),n.createElement("button",{onClick:A,role:"button",title:"next",className:"bg-orange-300 transition-colors ease-in hover:bg-orange-400 text-white size-10 flex justify-center items-center mt-10 rounded-full"},n.createElement(me,null))):null)))};export{Se as default};
