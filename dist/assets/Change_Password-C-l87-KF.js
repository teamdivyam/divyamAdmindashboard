import{u as b,r as y,a as N,o as S,R as e,L as d,I as m,B as x,g as v,h as i,_ as D}from"./index-CqUjVgox.js";import{T as C}from"./sonner-iBYa7rjY.js";import{w}from"./index-DLdLSjkK.js";import{D as L,a as T,b as q,c as I,d as O}from"./dialog-D93OiIH2.js";import{L as _}from"./Loader-BiBZsco3.js";const $=v({password:i().min(6,"Password must be minimum 6 character Long").required("Password  is required"),newPassword:i().min(6,"Password must be minimum 6 character Long").required("Enter your new password")}).required("Please confirm the password"),F=()=>{var n,l;const p=b(),[g,t]=y.useState(!1),{register:r,handleSubmit:u,reset:o,formState:{errors:a}}=N({mode:"all",resolver:S($),defaultValues:{password:"",newPassword:""}}),h=()=>{t(!0),localStorage.removeItem("AppID"),setTimeout(()=>{p("/login")},5e3)},E=localStorage.getItem("AppID"),f=P=>{(async()=>{try{const s=await(await fetch(`${D.BACKEND_URL}/api/admin/change-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify(P)})).json();s.success===!0&&(w("Password changed successfully.."),h()),s.success===!1&&w(s==null?void 0:s.msg),o()}catch(c){console.log(c.message),o()}})()};return e.createElement("div",{className:"change_password_wrapper "},e.createElement(L,{open:g,onOpenChange:t},e.createElement(T,null,e.createElement(q,null,e.createElement(I,null,"Password changed successfully"),e.createElement(O,null,e.createElement("span",{className:"flex gap-4"},e.createElement(_,null),e.createElement("span",null,"Password has been changed successfully. You are being redirected to the login page")))))),e.createElement(C,null),e.createElement("h2",{className:"font-medium text-xl pb-2 border-b mb-8"},"Change Password"),e.createElement("form",{onSubmit:u(f)},e.createElement("div",{className:"grid gap-4"},e.createElement("div",{className:"grid gap-2"},e.createElement(d,{htmlFor:"email"},"Password"),e.createElement(m,{id:"password",type:"password",placeholder:"Enter your old Password",required:!0,className:"h-12",...r("password")}),e.createElement("div",{className:`${a!=null&&a.password?"block text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},a!=null&&a.password?(n=a.password)==null?void 0:n.message:".")),e.createElement("div",{className:"grid gap-2"},e.createElement(d,{htmlFor:"newPassword"},"New Password"),e.createElement(m,{id:"newPassword",type:"password",placeholder:"Enter new password",required:!0,className:"h-12",...r("newPassword")}),e.createElement("div",{className:`${a!=null&&a.newPassword?"block text-red-400 text-sm errMsgStyle":"text-red-400 text-sm errMsgStyle hidden"} `},a!=null&&a.newPassword?(l=a.newPassword)==null?void 0:l.message:"."))),e.createElement("div",{className:"change-password-action flex justify-end"},e.createElement(x,{className:"mt-4 bg-theme-color w-32 dark:text-white"},"Change Now"))))};export{F as default};
