import{r as n,V as L,Y as N,aB as ke,aC as Se,aD as Ce,aE as Ie,aF as j,H as V}from"./index-CqUjVgox.js";import"./dialog-D93OiIH2.js";import{S as Re}from"./search-DXH-IQ_M.js";var me=1,Ne=.9,Ae=.8,Me=.17,Z=.1,ee=.999,$e=.9999,De=.99,Fe=/[\\\/_+.#"@\[\(\{&]/,Ke=/[\\\/_+.#"@\[\(\{&]/g,Le=/[\s-]/,ve=/[\s-]/g;function re(e,l,r,m,u,c,d){if(c===l.length)return u===e.length?me:De;var f=`${u},${c}`;if(d[f]!==void 0)return d[f];for(var b=m.charAt(c),o=r.indexOf(b,u),v=0,h,C,E,I;o>=0;)h=re(e,l,r,m,o+1,c+1,d),h>v&&(o===u?h*=me:Fe.test(e.charAt(o-1))?(h*=Ae,E=e.slice(u,o-1).match(Ke),E&&u>0&&(h*=Math.pow(ee,E.length))):Le.test(e.charAt(o-1))?(h*=Ne,I=e.slice(u,o-1).match(ve),I&&u>0&&(h*=Math.pow(ee,I.length))):(h*=Me,u>0&&(h*=Math.pow(ee,o-u))),e.charAt(o)!==l.charAt(c)&&(h*=$e)),(h<Z&&r.charAt(o-1)===m.charAt(c+1)||m.charAt(c+1)===m.charAt(c)&&r.charAt(o-1)!==m.charAt(c))&&(C=re(e,l,r,m,o+1,c+2,d),C*Z>h&&(h=C*Z)),h>v&&(v=h),o=r.indexOf(b,o+1);return d[f]=v,v}function fe(e){return e.toLowerCase().replace(ve," ")}function Ve(e,l,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,re(e,l,fe(e),fe(l),0,0,{})}var P='[cmdk-group=""]',te='[cmdk-group-items=""]',qe='[cmdk-group-heading=""]',he='[cmdk-item=""]',pe=`${he}:not([aria-disabled="true"])`,ne="cmdk-item-select",F="data-value",Pe=(e,l,r)=>Ve(e,l,r),ge=n.createContext(void 0),B=()=>n.useContext(ge),be=n.createContext(void 0),le=()=>n.useContext(be),ye=n.createContext(void 0),we=n.forwardRef((e,l)=>{let r=K(()=>{var t,i;return{search:"",value:(i=(t=e.value)!=null?t:e.defaultValue)!=null?i:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),m=K(()=>new Set),u=K(()=>new Map),c=K(()=>new Map),d=K(()=>new Set),f=Ee(e),{label:b,children:o,value:v,onValueChange:h,filter:C,shouldFilter:E,loop:I,disablePointerSelection:H=!1,vimBindings:A=!0,...O}=e,U=L(),ae=L(),T=L(),M=n.useRef(null),y=_e();$(()=>{if(v!==void 0){let t=v.trim();r.current.value=t,x.emit()}},[v]),$(()=>{y(6,oe)},[]);let x=n.useMemo(()=>({subscribe:t=>(d.current.add(t),()=>d.current.delete(t)),snapshot:()=>r.current,setState:(t,i,s)=>{var a,p,g,S;if(!Object.is(r.current[t],i)){if(r.current[t]=i,t==="search")J(),Y(),y(1,_);else if(t==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let w=document.getElementById(T);w?w.focus():(a=document.getElementById(U))==null||a.focus()}if(y(7,()=>{var w;r.current.selectedItemId=(w=D())==null?void 0:w.id,x.emit()}),s||y(5,oe),((p=f.current)==null?void 0:p.value)!==void 0){let w=i??"";(S=(g=f.current).onValueChange)==null||S.call(g,w);return}}x.emit()}},emit:()=>{d.current.forEach(t=>t())}}),[]),W=n.useMemo(()=>({value:(t,i,s)=>{var a;i!==((a=c.current.get(t))==null?void 0:a.value)&&(c.current.set(t,{value:i,keywords:s}),r.current.filtered.items.set(t,ue(i,s)),y(2,()=>{Y(),x.emit()}))},item:(t,i)=>(m.current.add(t),i&&(u.current.has(i)?u.current.get(i).add(t):u.current.set(i,new Set([t]))),y(3,()=>{J(),Y(),r.current.value||_(),x.emit()}),()=>{c.current.delete(t),m.current.delete(t),r.current.filtered.items.delete(t);let s=D();y(4,()=>{J(),(s==null?void 0:s.getAttribute("id"))===t&&_(),x.emit()})}),group:t=>(u.current.has(t)||u.current.set(t,new Set),()=>{c.current.delete(t),u.current.delete(t)}),filter:()=>f.current.shouldFilter,label:b||e["aria-label"],getDisablePointerSelection:()=>f.current.disablePointerSelection,listId:U,inputId:T,labelId:ae,listInnerRef:M}),[]);function ue(t,i){var s,a;let p=(a=(s=f.current)==null?void 0:s.filter)!=null?a:Pe;return t?p(t,r.current.search,i):0}function Y(){if(!r.current.search||f.current.shouldFilter===!1)return;let t=r.current.filtered.items,i=[];r.current.filtered.groups.forEach(a=>{let p=u.current.get(a),g=0;p.forEach(S=>{let w=t.get(S);g=Math.max(w,g)}),i.push([a,g])});let s=M.current;q().sort((a,p)=>{var g,S;let w=a.getAttribute("id"),z=p.getAttribute("id");return((g=t.get(z))!=null?g:0)-((S=t.get(w))!=null?S:0)}).forEach(a=>{let p=a.closest(te);p?p.appendChild(a.parentElement===p?a:a.closest(`${te} > *`)):s.appendChild(a.parentElement===s?a:a.closest(`${te} > *`))}),i.sort((a,p)=>p[1]-a[1]).forEach(a=>{var p;let g=(p=M.current)==null?void 0:p.querySelector(`${P}[${F}="${encodeURIComponent(a[0])}"]`);g==null||g.parentElement.appendChild(g)})}function _(){let t=q().find(s=>s.getAttribute("aria-disabled")!=="true"),i=t==null?void 0:t.getAttribute(F);x.setState("value",i||void 0)}function J(){var t,i,s,a;if(!r.current.search||f.current.shouldFilter===!1){r.current.filtered.count=m.current.size;return}r.current.filtered.groups=new Set;let p=0;for(let g of m.current){let S=(i=(t=c.current.get(g))==null?void 0:t.value)!=null?i:"",w=(a=(s=c.current.get(g))==null?void 0:s.keywords)!=null?a:[],z=ue(S,w);r.current.filtered.items.set(g,z),z>0&&p++}for(let[g,S]of u.current)for(let w of S)if(r.current.filtered.items.get(w)>0){r.current.filtered.groups.add(g);break}r.current.filtered.count=p}function oe(){var t,i,s;let a=D();a&&(((t=a.parentElement)==null?void 0:t.firstChild)===a&&((s=(i=a.closest(P))==null?void 0:i.querySelector(qe))==null||s.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function D(){var t;return(t=M.current)==null?void 0:t.querySelector(`${he}[aria-selected="true"]`)}function q(){var t;return Array.from(((t=M.current)==null?void 0:t.querySelectorAll(pe))||[])}function X(t){let i=q()[t];i&&x.setState("value",i.getAttribute(F))}function Q(t){var i;let s=D(),a=q(),p=a.findIndex(S=>S===s),g=a[p+t];(i=f.current)!=null&&i.loop&&(g=p+t<0?a[a.length-1]:p+t===a.length?a[0]:a[p+t]),g&&x.setState("value",g.getAttribute(F))}function ie(t){let i=D(),s=i==null?void 0:i.closest(P),a;for(;s&&!a;)s=t>0?We(s,P):Ye(s,P),a=s==null?void 0:s.querySelector(pe);a?x.setState("value",a.getAttribute(F)):Q(t)}let ce=()=>X(q().length-1),de=t=>{t.preventDefault(),t.metaKey?ce():t.altKey?ie(1):Q(1)},se=t=>{t.preventDefault(),t.metaKey?X(0):t.altKey?ie(-1):Q(-1)};return n.createElement(N.div,{ref:l,tabIndex:-1,...O,"cmdk-root":"",onKeyDown:t=>{var i;(i=O.onKeyDown)==null||i.call(O,t);let s=t.nativeEvent.isComposing||t.keyCode===229;if(!(t.defaultPrevented||s))switch(t.key){case"n":case"j":{A&&t.ctrlKey&&de(t);break}case"ArrowDown":{de(t);break}case"p":case"k":{A&&t.ctrlKey&&se(t);break}case"ArrowUp":{se(t);break}case"Home":{t.preventDefault(),X(0);break}case"End":{t.preventDefault(),ce();break}case"Enter":{t.preventDefault();let a=D();if(a){let p=new Event(ne);a.dispatchEvent(p)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:W.inputId,id:W.labelId,style:Xe},b),G(e,t=>n.createElement(be.Provider,{value:x},n.createElement(ge.Provider,{value:W},t))))}),je=n.forwardRef((e,l)=>{var r,m;let u=L(),c=n.useRef(null),d=n.useContext(ye),f=B(),b=Ee(e),o=(m=(r=b.current)==null?void 0:r.forceMount)!=null?m:d==null?void 0:d.forceMount;$(()=>{if(!o)return f.item(u,d==null?void 0:d.id)},[o]);let v=xe(u,c,[e.value,e.children,c],e.keywords),h=le(),C=R(y=>y.value&&y.value===v.current),E=R(y=>o||f.filter()===!1?!0:y.search?y.filtered.items.get(u)>0:!0);n.useEffect(()=>{let y=c.current;if(!(!y||e.disabled))return y.addEventListener(ne,I),()=>y.removeEventListener(ne,I)},[E,e.onSelect,e.disabled]);function I(){var y,x;H(),(x=(y=b.current).onSelect)==null||x.call(y,v.current)}function H(){h.setState("value",v.current,!0)}if(!E)return null;let{disabled:A,value:O,onSelect:U,forceMount:ae,keywords:T,...M}=e;return n.createElement(N.div,{ref:j(c,l),...M,id:u,"cmdk-item":"",role:"option","aria-disabled":!!A,"aria-selected":!!C,"data-disabled":!!A,"data-selected":!!C,onPointerMove:A||f.getDisablePointerSelection()?void 0:H,onClick:A?void 0:I},e.children)}),Be=n.forwardRef((e,l)=>{let{heading:r,children:m,forceMount:u,...c}=e,d=L(),f=n.useRef(null),b=n.useRef(null),o=L(),v=B(),h=R(E=>u||v.filter()===!1?!0:E.search?E.filtered.groups.has(d):!0);$(()=>v.group(d),[]),xe(d,f,[e.value,e.heading,b]);let C=n.useMemo(()=>({id:d,forceMount:u}),[u]);return n.createElement(N.div,{ref:j(f,l),...c,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},r&&n.createElement("div",{ref:b,"cmdk-group-heading":"","aria-hidden":!0,id:o},r),G(e,E=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?o:void 0},n.createElement(ye.Provider,{value:C},E))))}),Oe=n.forwardRef((e,l)=>{let{alwaysRender:r,...m}=e,u=n.useRef(null),c=R(d=>!d.search);return!r&&!c?null:n.createElement(N.div,{ref:j(u,l),...m,"cmdk-separator":"",role:"separator"})}),ze=n.forwardRef((e,l)=>{let{onValueChange:r,...m}=e,u=e.value!=null,c=le(),d=R(o=>o.search),f=R(o=>o.selectedItemId),b=B();return n.useEffect(()=>{e.value!=null&&c.setState("search",e.value)},[e.value]),n.createElement(N.input,{ref:l,...m,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":b.listId,"aria-labelledby":b.labelId,"aria-activedescendant":f,id:b.inputId,type:"text",value:u?e.value:d,onChange:o=>{u||c.setState("search",o.target.value),r==null||r(o.target.value)}})}),Ge=n.forwardRef((e,l)=>{let{children:r,label:m="Suggestions",...u}=e,c=n.useRef(null),d=n.useRef(null),f=R(o=>o.selectedItemId),b=B();return n.useEffect(()=>{if(d.current&&c.current){let o=d.current,v=c.current,h,C=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let E=o.offsetHeight;v.style.setProperty("--cmdk-list-height",E.toFixed(1)+"px")})});return C.observe(o),()=>{cancelAnimationFrame(h),C.unobserve(o)}}},[]),n.createElement(N.div,{ref:j(c,l),...u,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":f,"aria-label":m,id:b.listId},G(e,o=>n.createElement("div",{ref:j(d,b.listInnerRef),"cmdk-list-sizer":""},o)))}),He=n.forwardRef((e,l)=>{let{open:r,onOpenChange:m,overlayClassName:u,contentClassName:c,container:d,...f}=e;return n.createElement(ke,{open:r,onOpenChange:m},n.createElement(Se,{container:d},n.createElement(Ce,{"cmdk-overlay":"",className:u}),n.createElement(Ie,{"aria-label":e.label,"cmdk-dialog":"",className:c},n.createElement(we,{ref:l,...f}))))}),Ue=n.forwardRef((e,l)=>R(r=>r.filtered.count===0)?n.createElement(N.div,{ref:l,...e,"cmdk-empty":"",role:"presentation"}):null),Te=n.forwardRef((e,l)=>{let{progress:r,children:m,label:u="Loading...",...c}=e;return n.createElement(N.div,{ref:l,...c,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":u},G(e,d=>n.createElement("div",{"aria-hidden":!0},d)))}),k=Object.assign(we,{List:Ge,Item:je,Input:ze,Group:Be,Separator:Oe,Dialog:He,Empty:Ue,Loading:Te});function We(e,l){let r=e.nextElementSibling;for(;r;){if(r.matches(l))return r;r=r.nextElementSibling}}function Ye(e,l){let r=e.previousElementSibling;for(;r;){if(r.matches(l))return r;r=r.previousElementSibling}}function Ee(e){let l=n.useRef(e);return $(()=>{l.current=e}),l}var $=typeof window>"u"?n.useEffect:n.useLayoutEffect;function K(e){let l=n.useRef();return l.current===void 0&&(l.current=e()),l}function R(e){let l=le(),r=()=>e(l.snapshot());return n.useSyncExternalStore(l.subscribe,r,r)}function xe(e,l,r,m=[]){let u=n.useRef(),c=B();return $(()=>{var d;let f=(()=>{var o;for(let v of r){if(typeof v=="string")return v.trim();if(typeof v=="object"&&"current"in v)return v.current?(o=v.current.textContent)==null?void 0:o.trim():u.current}})(),b=m.map(o=>o.trim());c.value(e,f,b),(d=l.current)==null||d.setAttribute(F,f),u.current=f}),u}var _e=()=>{let[e,l]=n.useState(),r=K(()=>new Map);return $(()=>{r.current.forEach(m=>m()),r.current=new Map},[e]),(m,u)=>{r.current.set(m,u),l({})}};function Je(e){let l=e.type;return typeof l=="function"?l(e.props):"render"in l?l.render(e.props):e}function G({asChild:e,children:l},r){return e&&n.isValidElement(l)?n.cloneElement(Je(l),{ref:l.ref},r(l.props.children)):r(l)}var Xe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Qe=n.forwardRef(({className:e,...l},r)=>n.createElement(k,{ref:r,className:V("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...l}));Qe.displayName=k.displayName;const Ze=n.forwardRef(({className:e,...l},r)=>n.createElement("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":""},n.createElement(Re,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.createElement(k.Input,{ref:r,className:V("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...l})));Ze.displayName=k.Input.displayName;const et=n.forwardRef(({className:e,...l},r)=>n.createElement(k.List,{ref:r,className:V("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...l}));et.displayName=k.List.displayName;const tt=n.forwardRef((e,l)=>n.createElement(k.Empty,{ref:l,className:"py-6 text-center text-sm",...e}));tt.displayName=k.Empty.displayName;const rt=n.forwardRef(({className:e,...l},r)=>n.createElement(k.Group,{ref:r,className:V("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...l}));rt.displayName=k.Group.displayName;const nt=n.forwardRef(({className:e,...l},r)=>n.createElement(k.Separator,{ref:r,className:V("-mx-1 h-px bg-border",e),...l}));nt.displayName=k.Separator.displayName;const lt=n.forwardRef(({className:e,...l},r)=>n.createElement(k.Item,{ref:r,className:V("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...l}));lt.displayName=k.Item.displayName;export{Qe as C,k as _,Ze as a,et as b,tt as c,rt as d,lt as e};
