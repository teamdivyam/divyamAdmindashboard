import{T as S,b as v,c as k,d as c,e as I,f as m}from"./table-DQqYmbkR.js";import{D as x,a as M,b as G,c as L,d as $}from"./dialog-CwGvPLDO.js";import{D as R,a as B,b as U,c as F,d as O,e as h,B as y,_ as p}from"./index-fHwZLE-T.js";import{P as j,a as H,b as s,c as K,d as E,e as V,f as z}from"./pagination-D2K3nF_G.js";import{r as n,a as e}from"./react-BM40__SY.js";import{L as q}from"./Loader-CZaHulb3.js";import{w as N}from"./sonner-CBLC4ypc.js";import{E as J}from"./lucide-react-BWZ2dPnB.js";import{u as Q,a as P}from"./react-router-DRLUvzUh.js";import"./@radix-ui-Bvz2HI7m.js";import"./react-remove-scroll-DR3rXkvR.js";import"./tslib-eMSY344_.js";import"./react-remove-scroll-bar-BhARyL5A.js";import"./react-style-singleton-DeLYGn6u.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-CISbmOY4.js";import"./use-callback-ref-Bp38XRF0.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-dom-BKOhnANa.js";import"./attr-accept-CkmCM30I.js";import"./scheduler-C323NY8X.js";import"./@floating-ui-DHl6l98I.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./react-google-recaptcha-C2_uU7Xm.js";import"./prop-types-DFk7-3jw.js";import"./react-async-script-BL5K2liq.js";import"./hoist-non-react-statics-CPzswhKp.js";import"./react-is-CnyDuYXe.js";import"./@hookform-D0jWCfUg.js";import"./react-hook-form-BN_naEWj.js";import"./yup-DazPcaNu.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-tjHGMS6M.js";import"./react-redux-DNfLtVbP.js";import"./use-sync-external-store-H6R0MgJP.js";import"./@reduxjs-DtXgGc0i.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./jwt-decode-VWaDGczM.js";import"./recharts-BSzae8HI.js";import"./lodash-DiYzGN5e.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./react-smooth-DYD8lKML.js";import"./fast-equals-BIyco3rD.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-CEDTliZZ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-BRe_pui0.js";import"./cookie--_YQFYBD.js";const W={page:1,limit:16},X=(a,r)=>{switch(r.type){case"FIRST_PAGE":return{...a,page:a.page=1};case"SET_PAGE_NUM":return{...a,page:r.payload};case"INC_PAGE":return{...a,page:a.page+1};case"DEC_PAGE":return{...a,page:a.page-1};case"SET_PAGE_LIMIT":return{...a,limit:r.payload};default:return a}},it=()=>{const[a,r]=n.useState(!1),[o,D]=n.useState(null),[T,u]=n.useState(!0),[Y,Z]=n.useState(5),[d,w]=n.useState(null),[g,i]=n.useReducer(X,W),C=Q(),f=localStorage.getItem("AppID"),b=async()=>{try{d||N("Invalid Package Id");const t=await fetch(`${p&&p.BACKEND_URL}/api/admin/package/${d}`,{method:"DELETE",headers:{Authorization:`Bearer ${f}`}});if(!t.ok)throw new Error("Can't able to delete packages");t.ok&&(r(l=>!l),N("Successfully deleted."),C(0))}catch(t){console.log(t)}};n.useEffect(()=>{(async()=>{try{const l=await fetch(`${p&&p.BACKEND_URL}/api/admin/package/?page=${g.page}&limit=${g.limit}`,{method:"GET",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}});l.ok||u(!0);const A=await l.json();u(!1),D(A)}catch{u(!0)}})()},[]);const _=t=>{w(t),r(l=>!l)};return e.createElement(e.Fragment,null,T?e.createElement(q,null):e.createElement("div",{className:"lg:px-10 lg:mx-auto"},o&&o.length?e.createElement(S,null,e.createElement(v,null,e.createElement(k,null,e.createElement(c,{className:"w-[100px]"},"id"),e.createElement(c,null,"Name"),e.createElement(c,null,"Published Package"),e.createElement(c,null,"Capacity"),e.createElement(c,null,"Price"),e.createElement(c,null,"Action"))),e.createElement(I,null,o&&o.map(t=>e.createElement(k,{key:t.pkg_id},e.createElement(m,{className:"font-medium"},e.createElement(P,{to:`/dashboard/package/${t==null?void 0:t.slug}`},t.pkg_id)),e.createElement(m,null,t==null?void 0:t.name),e.createElement(m,null,t.isVisible===!0?"Published":"Not Publish yet"),e.createElement(m,null,t==null?void 0:t.capacity," People"),e.createElement(m,null,t==null?void 0:t.price),e.createElement("td",{className:"text-left"},e.createElement(R,null,e.createElement(B,null,e.createElement(J,null)),e.createElement(U,null,e.createElement(F,null,"Action"),e.createElement(O,null),e.createElement(h,{className:"cursor-pointer"},e.createElement(P,{to:`/dashboard/package/${t==null?void 0:t.slug}`},"View More")),e.createElement(h,{className:" text-red-400 hover:text-red-800 cursor-pointer"},e.createElement("button",{className:"w-full text-left",onClick:()=>{_(t._id)}},"Delete"))))))))):e.createElement("span",{className:"block lg:mt-20 text-center font-medium text-neutral-500"},"Oops! There's no data to show right now. It looks like no packages are available. Try adding a new package to get started! ðŸ˜Š")),o&&o.length>8?e.createElement(j,null,e.createElement(H,null,e.createElement(s,null,e.createElement(K,{className:"cursor-pointer",onClick:()=>{(state==null?void 0:state.page)==1||i({type:"FIRST_PAGE"})}})),e.createElement(s,null,e.createElement(E,{className:"cursor-pointer",isActive:!0,onClick:()=>{i({type:"SET_PAGE_NUM",payload:1})}},"1")),e.createElement(s,null,e.createElement(E,{className:"cursor-pointer",isActive:!0,onClick:()=>{i({type:"SET_PAGE_NUM",payload:2})}},"2")),e.createElement(s,null,e.createElement(E,{className:"cursor-pointer",isActive:!0,onClick:()=>{i({type:"SET_PAGE_NUM",payload:3})}},"3")),e.createElement(s,null,e.createElement(V,null)),e.createElement(s,null,e.createElement(z,{className:"cursor-pointer",onClick:()=>{i({type:"INC_PAGE"})}})))):null,e.createElement(x,{open:a,onOpenChange:r},e.createElement(M,null,e.createElement(G,null,e.createElement(L,null,"Are you absolutely sure?"),e.createElement($,null,"This action cannot be undone. This will permanently delete your account and remove your data from our servers.",e.createElement("span",{className:"mt-5 flex justify-end gap-3"},e.createElement(y,{variant:"secondary",className:"w-28 ",onClick:()=>r(t=>!t)},"Cancel"),e.createElement(y,{variant:"destructive",className:"w-28",onClick:b},"Confirm")))))))};export{it as default};
