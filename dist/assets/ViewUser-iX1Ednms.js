import{r as l,a as e}from"./react-BM40__SY.js";import{B as v}from"./badge-DAiYVQtE.js";import{T as b}from"./sonner-UVoS8Wfh.js";import{w as D}from"./sonner-CBLC4ypc.js";import{L as w}from"./Loader-CZaHulb3.js";import{_ as E,B as g}from"./index-fHwZLE-T.js";import{D as y,a as A,b as C,c as j,d as k}from"./dialog-CwGvPLDO.js";import{h as I}from"./moment-CpqwY_VT.js";import{a as S,u as T,d as _}from"./react-router-DRLUvzUh.js";import{h as z,m as B,n as M,M as $,o as L}from"./lucide-react-BWZ2dPnB.js";import"./attr-accept-CkmCM30I.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./next-themes-05dgSDaz.js";import"./react-dom-BKOhnANa.js";import"./scheduler-C323NY8X.js";import"./@radix-ui-Bvz2HI7m.js";import"./react-remove-scroll-DR3rXkvR.js";import"./tslib-eMSY344_.js";import"./react-remove-scroll-bar-BhARyL5A.js";import"./react-style-singleton-DeLYGn6u.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-CISbmOY4.js";import"./use-callback-ref-Bp38XRF0.js";import"./aria-hidden-DQ5UC2Eg.js";import"./@floating-ui-DHl6l98I.js";import"./tailwind-merge-D696Ktp4.js";import"./react-google-recaptcha-C2_uU7Xm.js";import"./prop-types-DFk7-3jw.js";import"./react-async-script-BL5K2liq.js";import"./hoist-non-react-statics-CPzswhKp.js";import"./react-is-CnyDuYXe.js";import"./@hookform-D0jWCfUg.js";import"./react-hook-form-BN_naEWj.js";import"./yup-DazPcaNu.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-tjHGMS6M.js";import"./react-redux-DNfLtVbP.js";import"./use-sync-external-store-H6R0MgJP.js";import"./@reduxjs-DtXgGc0i.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./jwt-decode-VWaDGczM.js";import"./recharts-BSzae8HI.js";import"./lodash-DiYzGN5e.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./react-smooth-DYD8lKML.js";import"./fast-equals-BIyco3rD.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-CEDTliZZ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-BRe_pui0.js";import"./cookie--_YQFYBD.js";const O=localStorage.getItem("AppID"),P=o=>{var d,p,u,a,n,s,x;if(!o)return;const[r,h]=l.useState(),[m,N]=l.useState(),[c,t]=l.useState(!0);return m?e.createElement("p",{className:"text-red-500"},"Something went wrong. Please try again."):(l.useEffect(()=>{(async()=>{try{const f=await fetch(`${E.BACKEND_URL}/api/admin/order/${o.Orderid}`,{method:"GET",headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json",Accept:"application/json"}});if(!f.ok)throw N("can't fetch order details"),new Error("can't make req to server, plz check our Internet connection.");const i=await f.json();i!=null&&i.success&&(h(i==null?void 0:i.Order),setTimeout(()=>{t(!1)},400))}catch(f){throw new Error(f)}})()},[]),e.createElement(e.Fragment,null,c?e.createElement("div",{className:"relative right-[270px]"},e.createElement(w,null)):e.createElement("div",{className:"border flex justify-around   rounded-md p-2 animate-order"},e.createElement("img",{src:r&&((u=(p=(d=r==null?void 0:r.product)==null?void 0:d.productId)==null?void 0:p.productImg[0])==null?void 0:u.imgSrc),className:"object-cover size-20 rounded-sm  self-center"}),e.createElement("div",{className:"textContent self-start "},e.createElement("h2",{className:"font-normal text-md text-neutral-600 "},r&&((n=(a=r.product)==null?void 0:a.productId)==null?void 0:n.name)),e.createElement("p",{className:" text-neutral-500 pt-2 text-sm "},e.createElement("span",{className:"line-clamp-1 max-w-96"},r&&((x=(s=r.product)==null?void 0:s.productId)==null?void 0:x.description)))),e.createElement(S,{to:`/dashboard/order/${o.Orderid}`,className:"self-center text-blue-500 text-sm"},"View More"))))},R=()=>e.createElement(e.Fragment,null,e.createElement("svg",{fill:"white",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e.createElement("path",{d:"M16 2v2h3.586l-3.972 3.972c-1.54-1.231-3.489-1.972-5.614-1.972-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-2.125-.741-4.074-1.972-5.614l3.972-3.972v3.586h2v-7h-7zm-6 20c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z"}))),F=()=>e.createElement("svg",{width:"24px",height:"24px",fill:"white",viewBox:"0 0 1024 1024",className:"icon",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{fill:"#ffffff",d:"M512 640a256 256 0 100-512 256 256 0 000 512zm0 64a320 320 0 110-640 320 320 0 010 640z"}),e.createElement("path",{fill:"#ffffff",d:"M512 640q32 0 32 32v256q0 32-32 32t-32-32V672q0-32 32-32z"}),e.createElement("path",{fill:"#ffffff",d:"M352 800h320q32 0 32 32t-32 32H352q-32 0-32-32t32-32z"})),Ze=()=>{const o=T(),{USER_ID:r}=_(),[h,m]=l.useState(!1),[N,c]=l.useState(!0),[t,d]=l.useState(null),p=localStorage.getItem("AppID"),u=async()=>{try{const a=await fetch(`${E&&E.BACKEND_URL}/api/admin/user/${r}`,{method:"DELETE",headers:{"Content-type":"application/json",Authorization:`Bearer ${p}`}}),n=await a.json();a.ok&&(m(s=>!s),D("Successfully deleted."),o("/dashboard/users"))}catch(a){console.log(a)}};return l.useEffect(()=>{(async()=>{try{const n=await fetch(`${E.BACKEND_URL}/api/admin/user/${r}`,{method:"GET",headers:{"Content-type":"application/json",Authorization:`Bearer ${p}`,Accept:"application/json, application/xml"}});n.ok||(c(!0),o("/dashboard/users"));const s=await n.json();c(!1),setTimeout(()=>{d(s)},200)}catch{c(!0)}})()},[]),e.createElement(e.Fragment,null,e.createElement(b,null),t?e.createElement("div",{className:"bg-neutral-100 dark:bg-gray-700 rounded-lg border p-6 mx-auto w-1/2",id:"oderPreview"},e.createElement("div",{className:"cardHeader flex justify-between"},e.createElement(v,{variant:"destructive",className:"bg-orange-400 py-1 cursor-pointer hover:bg-orange-400"},e.createElement(z,null)),e.createElement(v,{variant:"destructive",className:"bg-white text-neutral-500 hover:bg-white"},e.createElement("span",{className:"font-"},"Joined Date:"),e.createElement("span",{className:`inline-block uppercase pl-1 rounded-full  text-neutral-500
              font-medium 
              `},`${t&&t.createdAt}`))),e.createElement("div",{className:"cardBody bg-white dark:bg-slate-800 rounded-md border p-6 mt-6"},e.createElement("div",{className:"userProfile flex flex-row "},t&&t.avatar?e.createElement("img",{src:t==null?void 0:t.avatar,className:"w-[150px] h-[150px] object-cover rounded-sm shadow-sm",onError:a=>{a.target.onerror=null,a.target.src="https://placehold.co/300x300?text=NA"},alt:"profile-image"}):null,e.createElement("div",{className:"profileText pt-10 pl-10"},e.createElement("h2",{className:"font-medium text-neutral-600 text-3xl flex items-center"},t&&t.fullName?t.fullName:"Not Available",e.createElement("span",{title:t&&t.gender=="male"?"Male":"Female",className:"rounded-full size-8 flex justify-center items-center ml-2 p-2 text-white bg-orange-400"},t&&t.gender=="male"?e.createElement(R,null):e.createElement(F,null))),e.createElement("p",{className:"mobileNum flex items-center pt-2 text-neutral-400"},t&&t.mobileNum?e.createElement(e.Fragment,null,e.createElement(B,null),e.createElement("span",{className:"pl-2"},t.mobileNum)):"Mobile number is not available"),e.createElement("p",{className:"age  mt-2  flex items-center  text-neutral-400"},t&&t.dob?e.createElement(e.Fragment,null,e.createElement(M,null),e.createElement("span",{className:"pl-2 font-normal"},I(t.dob).format("DD-MM-YYYY"))):"Date of birth is not available"),e.createElement("p",{className:"age  mt-2  flex items-center  text-neutral-400"},t&&t.areaPin?e.createElement(e.Fragment,null,e.createElement($,null),e.createElement("span",{className:"pl-2 font-normal"},t.areaPin)):"Area pin code is not available"),e.createElement("p",{className:"mt-2 flex text-neutral-400 "},t&&t.address?e.createElement(e.Fragment,null,e.createElement(L,null),e.createElement("span",{className:"pl-2 capitalize"},`${t.address}  `)):"user Address is not available"))),e.createElement("div",{className:"customerOrders mt-4"},t&&(t!=null&&t.orders.length)?e.createElement("span",{className:" text-neutral-500 font-semibold pb-1 block"},"Orders:"," "):null,e.createElement("div",{className:"flex flex-col gap-4"},t&&(t!=null&&t.orders)?t.orders.map(a=>e.createElement(P,{Orderid:a,key:a})):e.createElement("p",null,"There is no orders with this user Id")))),e.createElement("div",{id:"userProfileDeleteAction",className:"w-full flex justify-end"},e.createElement(g,{variant:"destructive",className:"mt-8 flex justify-center items-center w-32 ",onClick:()=>{m(a=>!a)}},"Delete"))):e.createElement("div",{className:"mt-36"},e.createElement(w,null)),e.createElement(y,{open:h,onOpenChange:m},e.createElement(A,null,e.createElement(C,null,e.createElement(j,null,"Are you sure ?"),e.createElement(k,null,"This action cannot be undone. This will permanently delete user account and remove user data from our servers.",e.createElement("span",{className:" mt-4 flex justify-end gap-3"},e.createElement(g,{variant:"secondary",className:"w-28 ",onClick:()=>m(a=>!a)},"Cancel"),e.createElement(g,{variant:"destructive",className:"w-28 ",onClick:u},"Confirm")))))))};export{Ze as default};
