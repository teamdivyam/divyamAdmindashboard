import{T as S,b as v,c as k,d as o,e as I,f as u}from"./table-D59fVxqX.js";import{D as x,a as M,b as G,c as L,d as R}from"./dialog-D93OiIH2.js";import{r as l,u as $,R as e,N as y,D as B,b as U,c as j,d as F,e as O,f as h,B as T,_ as m}from"./index-CqUjVgox.js";import{E as H,P as K,a as z,b as s,c as V,d,e as q,f as J}from"./pagination-CBf_EoO0.js";import{L as Q}from"./Loader-BiBZsco3.js";import{w as D}from"./index-DLdLSjkK.js";import"./chevron-left-Dv4wvR6C.js";const W={page:1,limit:16},X=(t,n)=>{switch(n.type){case"FIRST_PAGE":return{...t,page:t.page=1};case"SET_PAGE_NUM":return{...t,page:n.payload};case"INC_PAGE":return{...t,page:t.page+1};case"DEC_PAGE":return{...t,page:t.page-1};case"SET_PAGE_LIMIT":return{...t,limit:n.payload};default:return t}},oe=()=>{const[t,n]=l.useState(!1),[r,P]=l.useState(null),[w,E]=l.useState(!0),[Y,Z]=l.useState(5),[g,C]=l.useState(null),[f,i]=l.useReducer(X,W),_=$(),N=localStorage.getItem("AppID"),A=async()=>{try{g||D("Invalid Package Id");const a=await fetch(`${m&&m.BACKEND_URL}/api/admin/package/${g}`,{method:"DELETE",headers:{Authorization:`Bearer ${N}`}}),c=await a.json();a.ok&&(n(p=>!p),D("Successfully deleted."),_(0))}catch(a){console.log(a)}};l.useEffect(()=>{(async()=>{try{const c=await fetch(`${m&&m.BACKEND_URL}/api/admin/package/?page=${f.page}&limit=${f.limit}`,{method:"GET",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"}});c.ok||E(!0);const p=await c.json();E(!1),P(p)}catch{E(!0)}})()},[]);const b=a=>{C(a),n(c=>!c)};return e.createElement(e.Fragment,null,w?e.createElement(Q,null):e.createElement("div",{className:"lg:px-10 lg:mx-auto"},r&&r.length?e.createElement(S,null,e.createElement(v,null,e.createElement(k,null,e.createElement(o,{className:"w-[100px]"},"id"),e.createElement(o,null,"Name"),e.createElement(o,null,"Status"),e.createElement(o,null,"Capacity"),e.createElement(o,null,"Price"),e.createElement(o,null,"Action"))),e.createElement(I,null,r&&r.map(a=>e.createElement(k,{key:a.pkg_id},e.createElement(u,{className:"font-medium"},e.createElement(y,{to:`/dashboard/package/${a==null?void 0:a.slug}`},a.pkg_id)),e.createElement(u,null,a.name),e.createElement(u,null,a.status),e.createElement(u,null,a.capacity," People"),e.createElement(u,null,a.price),e.createElement("td",{className:"text-left"},e.createElement(B,null,e.createElement(U,null,e.createElement(H,null)),e.createElement(j,null,e.createElement(F,null,"Action"),e.createElement(O,null),e.createElement(h,{className:"cursor-pointer"},e.createElement(y,{to:`/dashboard/package/${a==null?void 0:a._id}`},"View More")),e.createElement(h,{className:" text-red-400 hover:text-red-800 cursor-pointer"},e.createElement("button",{className:"w-full text-left",onClick:()=>{console.log("ITEM-is",a),b(a._id)}},"Delete"))))))))):e.createElement("span",{className:"block lg:mt-20 text-center font-medium text-neutral-500"},"Oops! There's no data to show right now. It looks like no packages are available. Try adding a new package to get started! ðŸ˜Š")),r&&r.length>8?e.createElement(K,null,e.createElement(z,null,e.createElement(s,null,e.createElement(V,{className:"cursor-pointer",onClick:()=>{(state==null?void 0:state.page)==1||i({type:"FIRST_PAGE"})}})),e.createElement(s,null,e.createElement(d,{className:"cursor-pointer",isActive:!0,onClick:()=>{i({type:"SET_PAGE_NUM",payload:1})}},"1")),e.createElement(s,null,e.createElement(d,{className:"cursor-pointer",isActive:!0,onClick:()=>{i({type:"SET_PAGE_NUM",payload:2})}},"2")),e.createElement(s,null,e.createElement(d,{className:"cursor-pointer",isActive:!0,onClick:()=>{i({type:"SET_PAGE_NUM",payload:3})}},"3")),e.createElement(s,null,e.createElement(q,null)),e.createElement(s,null,e.createElement(J,{className:"cursor-pointer",onClick:()=>{i({type:"INC_PAGE"})}})))):null,e.createElement(x,{open:t,onOpenChange:n},e.createElement(M,null,e.createElement(G,null,e.createElement(L,null,"Are you absolutely sure?"),e.createElement(R,null,"This action cannot be undone. This will permanently delete your account and remove your data from our servers.",e.createElement("span",{className:"mt-5 flex justify-end gap-3"},e.createElement(T,{variant:"secondary",className:"w-28 ",onClick:()=>n(a=>!a)},"Cancel"),e.createElement(T,{variant:"destructive",className:"w-28",onClick:A},"Confirm")))))))};export{oe as default};
