import{T as S,a as x,b as D,c as N,d as p,e as C,f as m}from"./table-DQqYmbkR.js";import{o as P}from"./@hookform-D0jWCfUg.js";import{c as I,a as v}from"./yup-DazPcaNu.js";import{P as R,a as M,b as i,c as k,d as u,e as O,f as F}from"./pagination-D2K3nF_G.js";import{r as E,a as e}from"./react-BM40__SY.js";import{D as $,a as G,b as K,c as L,d as U,e as j,_ as d}from"./index-fHwZLE-T.js";import{T as B}from"./sonner-UVoS8Wfh.js";import{w as g}from"./sonner-CBLC4ypc.js";import{u as H}from"./react-hook-form-BN_naEWj.js";import{k as V,E as z}from"./lucide-react-BWZ2dPnB.js";import{u as Q,a as y}from"./react-router-DRLUvzUh.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-tjHGMS6M.js";import"./attr-accept-CkmCM30I.js";import"./react-dom-BKOhnANa.js";import"./scheduler-C323NY8X.js";import"./@radix-ui-Bvz2HI7m.js";import"./react-remove-scroll-DR3rXkvR.js";import"./tslib-eMSY344_.js";import"./react-remove-scroll-bar-BhARyL5A.js";import"./react-style-singleton-DeLYGn6u.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-CISbmOY4.js";import"./use-callback-ref-Bp38XRF0.js";import"./aria-hidden-DQ5UC2Eg.js";import"./@floating-ui-DHl6l98I.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./react-google-recaptcha-C2_uU7Xm.js";import"./prop-types-DFk7-3jw.js";import"./react-async-script-BL5K2liq.js";import"./hoist-non-react-statics-CPzswhKp.js";import"./react-is-CnyDuYXe.js";import"./react-redux-DNfLtVbP.js";import"./use-sync-external-store-H6R0MgJP.js";import"./@reduxjs-DtXgGc0i.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./jwt-decode-VWaDGczM.js";import"./recharts-BSzae8HI.js";import"./lodash-DiYzGN5e.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./react-smooth-DYD8lKML.js";import"./fast-equals-BIyco3rD.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-CEDTliZZ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-BRe_pui0.js";import"./cookie--_YQFYBD.js";import"./next-themes-05dgSDaz.js";const q=I({searchKey:v().min(5,"Invalid order id").max(20).required("Invalid order id.")}),W={page:1,limit:16},J=(r,c)=>{switch(c.type){case"FIRST_PAGE":return{...r,page:r.page=1};case"SET_PAGE_NUM":return{...r,page:c.payload};case"INC_PAGE":return{...r,page:r.page+1};case"DEC_PAGE":return{...r,page:r.page-1};case"SET_PAGE_LIMIT":return{...r,limit:c.payload};default:return r}};function mt(){const[r,c]=E.useState(null),h=localStorage.getItem("AppID"),b=Q(),[a,s]=E.useReducer(J,W),{register:A,handleSubmit:_,reset:X,formState:{errors:o}}=H({mode:"all",resolver:P(q),defaultValues:{searchKey:""}}),T=t=>{(async()=>{try{const f=await(await fetch(`${d&&d.BACKEND_URL}/api/admin/search-orders?searchKey=${t==null?void 0:t.searchKey}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`,Accept:"application/json, application/xml"}})).json();f.success===!0?b(`/dashboard/order/${f._id}`):g.error("Invalid order id")}catch{g.error("please try again later.")}})()};E.useEffect(()=>{(async()=>{try{const l=await(await fetch(`${d.BACKEND_URL}/api/admin/order-new?page=${a==null?void 0:a.page}&limit=${a==null?void 0:a.limit}`,{method:"GET",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}})).json();c(l==null?void 0:l.orders)}catch(n){console.log(n)}})()},[a.page]),E.useEffect(()=>{var t,n;(t=o==null?void 0:o.searchKey)!=null&&t.message&&g.error((n=o==null?void 0:o.searchKey)==null?void 0:n.message)},[o.searchKey]);const w=t=>t==="Pending"?e.createElement(e.Fragment,null,e.createElement("span",{className:"text-yellow-700"},t)):t=="Success"||t=="Delivered"||t=="Shipped"||t=="Out for Delivery"?e.createElement(e.Fragment,null,e.createElement("span",{className:"text-green-500 "},t)):t=="Failed"||t=="Declined"?e.createElement(e.Fragment,null,e.createElement("span",{className:"text-red-500"},t)):t==="Processing"?e.createElement(e.Fragment,null,e.createElement("span",{className:"text-blue-500"},t)):t=="CANCELLATION_REQUESTED"||t==="REFUND_REQUESTED"?e.createElement(e.Fragment,null,e.createElement("span",{className:"text-yellow-700"},t)):e.createElement(e.Fragment,null,e.createElement("span",{className:"text-black font-bold"},t));return r&&!r.length?e.createElement("span",{className:"block lg:mt-20 text-center font-medium text-neutral-500"},"Oops! There's no data to show right now. It looks like no orders are available ðŸ˜Š"):e.createElement(e.Fragment,null,r&&e.createElement("div",{className:"w-full "},e.createElement(B,{richColors:!0}),e.createElement("form",{className:"flex justify-center  w-full px-3 py-4",onSubmit:_(T)},e.createElement("input",{type:"text",name:"search",id:"search",placeholder:"Search with order id",className:"border px-4 shadow-sm  w-full rounded-lg text-lg rounded-r-none dark:bg-slate-600",...A("searchKey")}),e.createElement("button",{type:"submit",className:"bg-orange-400 rounded-md p-2 text-white rounded-l-none"},e.createElement(V,{className:"size-8"}))),e.createElement(S,null,e.createElement(x,null,"."),e.createElement(D,null,e.createElement(N,null,e.createElement(p,{className:"w-[300px]"},"Order Id"),e.createElement(p,null,"Status"),e.createElement(p,null,"Payment Method"),e.createElement(p,{className:"text-right"},"Amount"),e.createElement(p,{className:"text-right"},"Date"))),e.createElement(C,null,r&&r.length>0?r.map((t,n)=>{var l;return e.createElement(N,{key:n,className:t.isFreshOrder?"bg-green-50":null},e.createElement(m,{className:"font-medium"},e.createElement(y,{to:`/dashboard/order/${t._id}`},t.orderId.split("_").at(1))),e.createElement(m,null,w(t.orderStatus)),e.createElement(m,null,((l=t==null?void 0:t.transaction)==null?void 0:l.paymentMethod)||e.createElement("span",{className:"text-neutral-500"},"Not available")),e.createElement(m,{className:"text-right"},t.totalAmount),e.createElement(m,{className:"text-right"},t==null?void 0:t.createdAt),e.createElement(m,{className:"text-right"},e.createElement($,null,e.createElement(G,null,e.createElement(z,null)),e.createElement(K,null,e.createElement(L,null,"Action"),e.createElement(U,null),e.createElement(j,{className:"cursor-pointer"},e.createElement(y,{to:`${t._id}`},"View More"))))))}):e.createElement("h1",null,"0 Orders available.."))),r&&r.length>10?e.createElement(R,null,e.createElement(M,null,e.createElement(i,null,e.createElement(k,{className:"cursor-pointer",onClick:()=>{(a==null?void 0:a.page)==1||s({type:"FIRST_PAGE"})}})),e.createElement(i,null,e.createElement(u,{className:"cursor-pointer",isActive:!0,onClick:()=>{s({type:"SET_PAGE_NUM",payload:1})}},"1")),e.createElement(i,null,e.createElement(u,{className:"cursor-pointer",isActive:!0,onClick:()=>{s({type:"SET_PAGE_NUM",payload:2})}},"2")),e.createElement(i,null,e.createElement(u,{className:"cursor-pointer",isActive:!0,onClick:()=>{s({type:"SET_PAGE_NUM",payload:3})}},"3")),e.createElement(i,null,e.createElement(O,null)),e.createElement(i,null,e.createElement(F,{className:"cursor-pointer",onClick:()=>{s({type:"INC_PAGE"})}})))):null))}export{mt as default};
