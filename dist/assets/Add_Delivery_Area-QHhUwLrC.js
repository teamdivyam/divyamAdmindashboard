import{r as p,a as e}from"./react-BM40__SY.js";import{B as w,L as E,I as Q,s as X,g as ee,h as te,i as ae,_}from"./index-fHwZLE-T.js";import{C as O,I as re,d as ne,a as I}from"./ComboBox_select-q3wZeUQA.js";import{T as oe}from"./sonner-UVoS8Wfh.js";import{D as z,a as M,b as V,c as F,d as R}from"./dialog-CwGvPLDO.js";import{S as se}from"./switch-DRYMT_M7.js";import{u as le,a as ie}from"./react-redux-DNfLtVbP.js";import{u as ce}from"./react-hook-form-BN_naEWj.js";import{o as me}from"./@hookform-D0jWCfUg.js";import{c as pe,e as de,a as h}from"./yup-DazPcaNu.js";import{w as f}from"./sonner-CBLC4ypc.js";import{s as ue,o as fe,k as ge}from"./lucide-react-BWZ2dPnB.js";import{a as Ee}from"./react-router-DRLUvzUh.js";import"./attr-accept-CkmCM30I.js";import"./react-dom-BKOhnANa.js";import"./scheduler-C323NY8X.js";import"./@radix-ui-Bvz2HI7m.js";import"./react-remove-scroll-DR3rXkvR.js";import"./tslib-eMSY344_.js";import"./react-remove-scroll-bar-BhARyL5A.js";import"./react-style-singleton-DeLYGn6u.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-CISbmOY4.js";import"./use-callback-ref-Bp38XRF0.js";import"./aria-hidden-DQ5UC2Eg.js";import"./@floating-ui-DHl6l98I.js";import"./class-variance-authority-Dp3B9jqt.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-D696Ktp4.js";import"./react-google-recaptcha-C2_uU7Xm.js";import"./prop-types-DFk7-3jw.js";import"./react-async-script-BL5K2liq.js";import"./hoist-non-react-statics-CPzswhKp.js";import"./react-is-CnyDuYXe.js";import"./@reduxjs-DtXgGc0i.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./jwt-decode-VWaDGczM.js";import"./recharts-BSzae8HI.js";import"./lodash-DiYzGN5e.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./react-smooth-DYD8lKML.js";import"./fast-equals-BIyco3rD.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./recharts-scale-CEDTliZZ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-BRe_pui0.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-tjHGMS6M.js";import"./use-sync-external-store-H6R0MgJP.js";import"./cookie--_YQFYBD.js";import"./react-day-picker-D-Izaemk.js";import"./date-fns-BZLmoul0.js";import"./select-Cd5bAGBT.js";import"./date-fns-tz-Dh4fjyPi.js";import"./command-C-zk0mwW.js";import"./cmdk-BqBG_NPy.js";import"./next-themes-05dgSDaz.js";const he=/^[1-9]{1}[0-9]{5}$/;function j(o){const n=new Date(o),D=n.getFullYear(),s=String(n.getMonth()+1).padStart(2,"0"),v=String(n.getDate()).padStart(2,"0"),x=String(n.getHours()).padStart(2,"0"),S=String(n.getMinutes()).padStart(2,"0"),A=String(n.getSeconds()).padStart(2,"0"),i=String(n.getMilliseconds()).padStart(3,"0"),c=n.getTimezoneOffset(),a=Math.abs(c),y=String(Math.floor(a/60)).padStart(2,"0"),C=String(a%60).padStart(2,"0"),P=`${c<=0?"+":"-"}${y}:${C}`;return`${D}-${s}-${v}T${x}:${S}:${A}.${i}${P}`}const Se=pe({state:h().trim().min(3).required(),district:h().trim().min(3).required(),areaPinCode:h().required().matches(he,"Invalid Pin code"),startDate:h().trim().required(),endDate:h().trim().required(),isAvailable:de().required()}),Mt=()=>{var $;const o=p.useRef(null),[n,D]=p.useState(!1),[s,v]=p.useState(null),[x,S]=p.useState(!1),[A,i]=p.useState(!1),c=le(),a=ie(t=>t.AreaZone),y=t=>{t.preventDefault();const r=o.current.value,m=/^[1-9]{1}[0-9]{5}$/.test(r),u=async()=>{var T;try{const N=await fetch(`https://api.postalpincode.in/pincode/${r}`,{cache:"force-cache",method:"GET","Content-Type":"application/json",charset:"utf-8",Accept:"application/json, application/xml","Accept-Language":"en_US"});if(!N.ok){D(!0);return}const b=await N.json();console.log("Status",`${s&&s.length>0?s.Status:null}`),b&&v((T=b==null?void 0:b[0])==null?void 0:T.PostOffice)}catch(N){console.log(N)}};if(!m){f.error("Please enter valid pin code");return}u(),S(!0)},{register:C,handleSubmit:L,reset:P,setValue:d,getValues:Ne,watch:q,trigger:k,formState:g}=ce({mode:"all",resolver:me(Se),defaultValues:{state:"",district:"",areaPinCode:"",startDate:"",endDate:"",isAvailable:""}}),B=localStorage.getItem("AppID");g.errors;const H=async t=>{if(t.preventDefault(),!await k()){f.error("Umm! please fill the form correctly..");return}},{state:U,district:Z,areaPinCode:G,startDate:J,endDate:K,isAvailable:W}=q(),Y=async()=>{const t={state:U,district:Z,areaPinCode:G,startDate:J,endDate:K,isAvailable:W},r=async()=>{try{const m=await fetch(`${_&&_.BACKEND_URL}/api/admin/areas-zone`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B}`,Accept:"application/json, application/xml","Accept-Language":"en_US"},body:JSON.stringify(t)});m.ok&&(f.success("New area zone created successfully."),i(!1)),m.ok||(i(!1),f.error("Please check your internet connection or fill the form carefully"));const u=await m.json();u.success||f.error(u==null?void 0:u.msg)}catch(m){console.log(m)}};if(!await k()){f.error("Please fill the form Carefully.");return}r()};return p.useEffect(()=>{d("state",a==null?void 0:a.state),d("district",a==null?void 0:a.district),d("areaPinCode",a==null?void 0:a.areaPinCode),d("startDate",a==null?void 0:a.startDate),d("endDate",a.endDate),d("isAvailable",a.isAvailable)},[a]),p.useEffect(()=>{console.log(g==null?void 0:g.errors)},[g]),e.createElement(e.Fragment,null,e.createElement(oe,{richColors:!0}),e.createElement(z,{open:A,onOpenChange:i},e.createElement(M,null,e.createElement(V,null,e.createElement(F,null,"Confirm Location Availability"),e.createElement(R,null,e.createElement("span",{className:"mt-2"},"Please review the location details you've entered. If everything looks correct, click Save to confirm. If you need to make changes, you can go back and edit the information"),e.createElement("span",{className:"border-t  border-slate-100 mt-3  flex  gap-2 justify-end"},e.createElement(w,{variant:"secondary",className:"mt-4 ",onClick:()=>{i(t=>!t)}},"Cancel"),e.createElement(w,{variant:"secondary",className:"mt-4 bg-orange-300 text-white w-20 hover:bg-orange-400",onClick:()=>{Y()}},"Save")))))),e.createElement(z,{open:x,onOpenChange:S},e.createElement(M,null,e.createElement(V,null,e.createElement(F,{className:"border-b pb-4"},"Area by Pincode"),e.createElement(R,null,e.createElement("span",null,e.createElement("ul",null,s&&s.length>0?s.map((t,r)=>e.createElement("li",{className:"flex items-center",key:t==null?void 0:t.Name},e.createElement("span",{className:"bg-white rounded-full p-2 text-green-600"},e.createElement(ue,{className:"size-4"})),t==null?void 0:t.Name)):e.createElement("span",null))),e.createElement(Ee,{target:"_blank",to:`https://www.google.com/maps/search/${($=o==null?void 0:o.current)==null?void 0:$.value}`,className:"w-full block h-10 mt-4 p-2 rounded-md border  bg-gray-300"},e.createElement("span",{className:"flex justify-center items-center gap-2"},e.createElement("span",{className:"animate-pulse "},"View area On Map"),e.createElement("span",{className:"animate-pulse"},e.createElement(fe,{className:"text-green-600 animate-pulse "})))))))),e.createElement("div",{className:"mx-auto"},e.createElement("div",{className:" mx-4 rounded-sm p-2 py-4"},e.createElement("h1",{className:"capitalize text-2xl border-b font-normal pb-3"},"Add new area zone"),e.createElement("div",{className:"border  mx-auto max-w-2xl rounded-md bg-slate-50 p-4 mt-6",id:"form_wrapper"},e.createElement("form",{className:"flex flex-col gap-4",onSubmit:t=>H(t)},e.createElement("div",{className:"flex flex-col gap-2"},e.createElement(E,{htmlFor:"state",className:"text-neutral-400"},"State"),e.createElement("span",{className:"w-full "},e.createElement(O,{placeHolderText:"Select State",optionsText:re,inputType:"STATE"}))),e.createElement("div",{className:"flex flex-col gap-2 "},e.createElement(E,{htmlFor:"district",className:"text-neutral-400"},"District"),e.createElement(O,{inputType:"DISTRICT",placeHolderText:"Select district",optionsText:ne})),e.createElement("div",{className:"flex flex-col gap-2 -mt-2"},e.createElement(E,{htmlFor:"areaPin",className:"text-neutral-400 "},"Pin code"),e.createElement("span",{className:" flex h-10"},e.createElement(Q,{className:`
                border-r-0
               rounded-r-none
                h-12`,placeholder:"Enter area pin code",ref:o,onChange:t=>{var r,l;o.current.value=(r=t==null?void 0:t.target)==null?void 0:r.value,c(X((l=t==null?void 0:t.target)==null?void 0:l.value))}}),e.createElement("button",{onClick:t=>y(t)},e.createElement("span",{className:"bg-orange-300 rounded-sm h-12  w-12  text-white border-l-0 rounded-l-none flex justify-center items-center"},e.createElement(ge,{className:"size-4"}))))),e.createElement("div",{className:"flex flex-col gap-2"},e.createElement(E,{htmlFor:"firstDate",className:"text-neutral-400 "},"Start Date"),e.createElement(I,{date:"09/02/2021",onDateSelect:({from:t,to:r})=>{const l=j(t);c(ee(l))},variant:"outline",numberOfMonths:1,className:"min-w-[150px]  "})),e.createElement("div",{className:"flex flex-col gap-2"},e.createElement(E,{htmlFor:"firstDate",className:"text-neutral-400 "},"End Date"),e.createElement(I,{date:"01/09/2021",onDateSelect:({from:t,to:r})=>{const l=j(t);c(te(l))},variant:"outline",numberOfMonths:1,className:"min-w-[150px] "})),e.createElement("div",{className:"border p-4 rounded-md shadow-sm flex justify-between items-center"},e.createElement("div",{className:"toggleSwitchTextContent"},e.createElement("h3",{className:"font-medium"},"Service Availability"),e.createElement("p",{className:"text-neutral-500"},"Set the status if the service is available or offline.")),e.createElement(se,{className:"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-orange-200",onCheckedChange:t=>{c(ae())}})),e.createElement("div",{className:"flex flex-col gap-2"},e.createElement(w,{className:"bg-[#ffa94e] uppercase font-semibold hover:bg-orange-300 mt-5 h-12",onClick:()=>{i(!0)}},"Add New area zone")))))))};export{Mt as default};
