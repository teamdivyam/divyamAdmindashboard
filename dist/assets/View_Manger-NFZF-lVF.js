import{R as e,u as w,B as f,C as A,r as o,m as M,U as _,T as I,_ as h}from"./index-CqUjVgox.js";import{T as k}from"./sonner-iBYa7rjY.js";import{B as N}from"./badge-B0N44wJb.js";import{D as b,a as y,b as S,c as x,d as D}from"./dialog-D93OiIH2.js";import{S as P}from"./search-DXH-IQ_M.js";import{P as j}from"./phone-B3oAJvn6.js";import{C as z}from"./calendar-DGlsJCaW.js";import{M as C}from"./map-pin-DxJRDjmM.js";import{f as v}from"./format-SmSpYad1.js";import"./index-DLdLSjkK.js";const B=({TextContent:t,ManagerInfo:n})=>{const s=n._id,c=t==null?void 0:t._id;if(!t)return;const i=w(),d=localStorage.getItem("AppID"),r=async()=>{const u={managerObjId:s,superVisorObjId:c};try{await(await fetch("http://localhost:3004/api/admin/set-supervisor",{method:"POST",headers:{authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify(u)})).json()&&i(0)}catch(E){throw new Error(E)}},m=()=>{r()};return e.createElement("div",{id:"superVisorCardWrapper",className:"flex border-b items-center  justify-between pb-3"},e.createElement("div",{className:"flex"},e.createElement("img",{src:"https://i.pravatar.cc/300",className:"size-10 rounded-full"}),e.createElement("div",{className:"pl-4"},e.createElement("h2",{className:"font-semibold capitalize"},t==null?void 0:t.fullName),e.createElement("p",null,t==null?void 0:t.address))),e.createElement(f,{variant:"outline",onClick:m},"Select Supervisor ",e.createElement(A,null)))},R=e.memo(B),T=({ManagerID:t})=>{const[n,s]=o.useState(),[c,i]=o.useState(),d=localStorage.getItem("AppID")||void 0;return o.useEffect(()=>{(async()=>{try{const u=await(await fetch("http://localhost:3004/api/admin/get-all-unassigned-supervisor",{method:"GET",headers:{authorization:`Bearer ${d}`}})).json();u&&s(u)}catch(m){throw new Error(m)}})()},[]),e.createElement(e.Fragment,null,e.createElement("div",{className:"superVisorListsWrapper flex flex-col gap-4 "},e.createElement("form",{className:" flex"},e.createElement("input",{type:"text",placeholder:"Search supervisors",className:"w-full border rounded-sm p-2 outline-none rounded-r-none",onChange:r=>{i(()=>r.target.value)}}),e.createElement("button",{className:"bg-orange-200 px-2 rounded-sm rounded-l-none text-neutral-500"},e.createElement(P,null))),e.createElement("div",{className:"h-96 overflow-y-auto border p-4 rounded-sm"},n&&n.length?n.map((r,m)=>e.createElement(R,{key:m,TextContent:r,ManagerInfo:t})):e.createElement("p",{className:"text-center text-slate-400"},"No records founds.."))))},V=e.memo(T),$=({IsDialogVisible:t,ManagerInfo:n})=>{const[s,c]=o.useState(!1);return o.useEffect(()=>{c(t)},[t]),e.createElement(e.Fragment,null,e.createElement(b,{open:s,onOpenChange:c},e.createElement(y,null,e.createElement(S,null,e.createElement(x,null,"Set Supervisor"),e.createElement(D,null,e.createElement(V,{ManagerID:n}))))))},O=e.memo($),F=()=>e.createElement(e.Fragment,null,e.createElement("svg",{fill:"white",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},e.createElement("path",{d:"M16 2v2h3.586l-3.972 3.972c-1.54-1.231-3.489-1.972-5.614-1.972-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-2.125-.741-4.074-1.972-5.614l3.972-3.972v3.586h2v-7h-7zm-6 20c-3.86 0-7-3.14-7-7s3.14-7 7-7 7 3.14 7 7-3.14 7-7 7z"}))),L=()=>e.createElement("svg",{width:"24px",height:"24px",fill:"white",viewBox:"0 0 1024 1024",className:"icon",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{fill:"#ffffff",d:"M512 640a256 256 0 100-512 256 256 0 000 512zm0 64a320 320 0 110-640 320 320 0 010 640z"}),e.createElement("path",{fill:"#ffffff",d:"M512 640q32 0 32 32v256q0 32-32 32t-32-32V672q0-32 32-32z"}),e.createElement("path",{fill:"#ffffff",d:"M352 800h320q32 0 32 32t-32 32H352q-32 0-32-32t32-32z"})),ee=()=>{const[t,n]=o.useState(null),{EMP_ID:s}=M(),c=w(),i=localStorage.getItem("AppID")||void 0,[d,r]=o.useState(!1),[m,u]=o.useState(!1),E=()=>{(async()=>{try{const l=await fetch(`${APP&&APP.BACKEND_URL}/api/admin/employee/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json",Accept:"application/json, application/xml","Accept-Language":"en_US"}});if(!l.ok){alert("Unknown error.");return}l.ok&&c(-1)}catch(l){console.log(l)}})()},g=a=>{(async()=>{try{(await(await fetch(`${h.BACKEND_URL}/api/admin/unset-supervisor`,{method:"PATCH",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({managerID:s,superVisorID:a._id})})).json()).success&&c(0)}catch(p){throw new Error(p)}})()};return o.useEffect(()=>{(async()=>{try{const l=await fetch(`${h.BACKEND_URL}/api/admin/employee/${s}`,{method:"GET",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(!l.ok)return;const p=await l.json();p&&n(p)}catch(l){console.log(l)}})()},[]),e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement(k,null),e.createElement("div",{className:"bg-orange-50 dark:bg-gray-700 rounded-lg border p-6 mx-auto w-1/2",id:"oderPreview"},e.createElement("div",{className:"cardHeader flex justify-between"},e.createElement(N,{variant:"destructive",className:"bg-orange-400 py-1 cursor-pointer hover:bg-orange-400 "},e.createElement(_,null),e.createElement("span",{className:"pl-2 uppercase font-medium text-white rounded-sm px-3"},t&&t.role)),e.createElement(N,{variant:"destructive",className:"bg-white text-neutral-500 hover:bg-white"},e.createElement("span",{className:"font-"},"Joined Date:"),e.createElement("span",{className:`inline-block uppercase pl-1 rounded-full  text-neutral-500
      font-medium 
      `},`${t&&v(t.createdAt,"MM-dd-yyyy")}`))),e.createElement("div",{className:"cardBody bg-white dark:bg-slate-800 rounded-md border p-6 mt-6"},e.createElement("div",{className:"userProfile flex flex-row "},e.createElement("img",{src:"https://i.pravatar.cc/300",className:"size-48 rounded-lg shadow-sm"}),e.createElement("div",{className:"profileText pt-10 pl-10"},e.createElement("h2",{className:"font-medium text-neutral-600 text-3xl flex items-center"},t&&t.fullName?t.fullName:"Not Available",e.createElement("span",{title:t&&t.gender=="male"?"Male":"Female",className:"rounded-full size-8 flex justify-center items-center ml-2 p-2 text-white bg-orange-400"},t&&t.gender=="male"?e.createElement(F,null):e.createElement(L,null))),e.createElement("p",{className:"mobileNum flex items-center pt-2 text-neutral-400"},t&&t.mobileNum?e.createElement(e.Fragment,null,e.createElement(j,null),e.createElement("span",{className:"pl-2"},t.mobileNum)):"Mobile number is not available"),e.createElement("p",{className:"age  mt-2  flex items-center  text-neutral-400"},t&&t.dob?e.createElement(e.Fragment,null,e.createElement(z,null),e.createElement("span",{className:"pl-2 font-normal"},v(t.dob,"MM-dd-yyyy"))):"Date of birth is not available"),e.createElement("p",{className:"mt-2 flex text-neutral-400 "},t&&t.address?e.createElement(e.Fragment,null,e.createElement(C,{className:""}),e.createElement("span",{className:"pl-2"},`${t.address}  `,e.createElement("span",{className:"font-medium font-"},t&&t.address))):"user Address is not available")))),t&&(t==null?void 0:t.role)==="manager"?e.createElement("div",{className:"border-b mt-4  p-2 text-white"},e.createElement("h2",{className:"text-neutral-400 text-nowrap font-normal capitalize"},"Choose supervisor"),e.createElement(O,{IsDialogVisible:m,ManagerInfo:t}),e.createElement("button",{className:"w-full border border-orange-200 rounded-md bg-orange-100 shadow-sm text-gray-600  p-2  text-left text-lg",onClick:()=>{u(a=>!a)}},"Choose now")):null,e.createElement("div",{className:"flex flex-col gap-2 mt-3"},(t==null?void 0:t.supervisors)&&t.supervisors.map(a=>e.createElement("div",{key:a._id,className:"bg-[#BE9E882D]   p-2 flex rounded-md justify-between items-center"},e.createElement("a",{className:"cursor-pointer",onClick:()=>{window.location.href=`/dashboard/employee/${a._id}`}},e.createElement("h4",{className:"capitalize tex-md font-medium text-neutral-500"},a==null?void 0:a.fullName)),e.createElement(f,{variant:"outline",size:"icon",className:"bg-red-500 hover:bg-red-400 border-0",onClick:()=>g(a)},e.createElement(I,{className:"text-white"}))))),e.createElement("div",{id:"userProfileDeleteAction",className:"w-full flex justify-end"},e.createElement(f,{variant:"destructive",className:"mt-8 flex justify-center items-center w-32 ",onClick:()=>{r(a=>!a)}},"Delete"))),e.createElement(b,{open:d,onOpenChange:r},e.createElement(y,null,e.createElement(S,null,e.createElement(x,null,"Are you sure ?"),e.createElement(D,null,"This action cannot be undone. This will permanently delete your account and remove your data from our servers.",e.createElement("span",{className:" mt-4 flex justify-end gap-3"},e.createElement(f,{variant:"secondary",className:"w-28 ",onClick:()=>r(a=>!a)},"Cancel"),e.createElement(f,{variant:"destructive",className:"w-28 ",onClick:E},"Confirm"))))))))};export{ee as default};
